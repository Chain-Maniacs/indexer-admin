(this["webpackJsonp@subql/indexer-admin"]=this["webpackJsonp@subql/indexer-admin"]||[]).push([[0],{1043:function(e,t,n){},1044:function(e,t,n){},1045:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(121),c=n.n(i),o=n(1084),s=n(1088),u=n(168),l=n(62),d=n(1083),p=n(1095),b=n(48),j=n(12),f=n(14),x=n(8),h=n(9),O=n(10),m=function(){function e(t){Object(h.a)(this,e),this.prefix=void 0,this.prefix=null!==t&&void 0!==t?t:""}return Object(O.a)(e,[{key:"getLogger",value:function(t){return new e("".concat(this.prefix,"[").concat(t,"]"))}},{key:"l",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(t=console).log.apply(t,["".concat(this.prefix).concat(null===e||void 0===e?void 0:e.toString())].concat(r))}},{key:"w",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(t=console).warn.apply(t,["".concat(this.prefix).concat(null===e||void 0===e?void 0:e.toString())].concat(r))}},{key:"e",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(t=console).error.apply(t,["".concat(this.prefix).concat(null===e||void 0===e?void 0:e.toString())].concat(r))}}]),e}(),v=m,g=n(1),y=Symbol(void 0),w=new v;function k(e,t){var n=Object(r.createContext)(y);return null!==t&&void 0!==t&&t.displayName&&(n.displayName=t.displayName),{Provider:function(a){var i=a.initialState,c=a.children,o=Object(r.useMemo)((function(){return null!==t&&void 0!==t&&t.displayName?w.getLogger(null===t||void 0===t?void 0:t.displayName):w}),[]),s=e(o,i);return Object(g.jsx)(n.Provider,{value:s,children:c})},useContainer:function(){var e,t=Object(r.useContext)(n);if(t===y)throw new Error("Component must be wrapped with <".concat(null!==(e=n.displayName)&&void 0!==e?e:"Container",".Provider>"));return t}}}var E,S,C,I,T,P,N,A,R,q,D,M,L,z,U,V,G,$,F,Y,H,_,K,B,W=k((function(){var e=Object(r.useState)(!1),t=Object(x.a)(e,2);return{pageLoading:t[0],setPageLoading:t[1]}}),{displayName:"Global Loading"}),X=W.useContainer,Q=W.Provider,J=f.a.div(E||(E=Object(j.a)(["\n  position: absolute;\n  display: flex;\n  width: 100%;\n  height: 100%;\n  z-index: 1000;\n  background-color: #f6f9fc;\n  justify-content: center;\n  align-items: flex-start;\n"]))),Z=function(){return X().pageLoading?Object(g.jsx)(J,{children:Object(g.jsx)(b.e,{size:30})}):null},ee=n(4),te=n(470),ne=n(242),re=n(279),ae=n(31),ie=n(23),ce=n(2),oe=n.n(ce),se=n(1096),ue=n(1075),le=n(1091),de=Object(le.a)(S||(S=Object(j.a)(["\n  query {\n    accountMetadata {\n      indexer\n    }\n  }\n"]))),pe=Object(le.a)(C||(C=Object(j.a)(["\n  mutation AddIndexer($indexer: String!) {\n    addIndexer(indexer: $indexer) {\n      indexer\n    }\n  }\n"]))),be=Object(le.a)(I||(I=Object(j.a)(["\n  mutation StartProject(\n    $forceEnabled: Boolean!\n    $poiEnabled: Boolean!\n    $queryVersion: String!\n    $nodeVersion: String!\n    $networkDictionary: String!\n    $networkEndpoint: String!\n    $id: String!\n  ) {\n    startProject(\n      forceEnabled: $forceEnabled\n      poiEnabled: $poiEnabled\n      queryVersion: $queryVersion\n      nodeVersion: $nodeVersion\n      networkDictionary: $networkDictionary\n      networkEndpoint: $networkEndpoint\n      id: $id\n    ) {\n      id\n      status\n      networkEndpoint\n      networkDictionary\n      nodeVersion\n      queryVersion\n      poiEnabled\n      nodeEndpoint\n      queryEndpoint\n    }\n  }\n"]))),je=Object(le.a)(T||(T=Object(j.a)(["\n  mutation StopProject($id: String!) {\n    stopProject(id: $id) {\n      id\n      status\n      networkEndpoint\n      nodeEndpoint\n      queryEndpoint\n    }\n  }\n"]))),fe=Object(le.a)(P||(P=Object(j.a)(["\n  query {\n    controllers {\n      id\n      address\n    }\n  }\n"]))),xe=Object(le.a)(N||(N=Object(j.a)(["\n  mutation AddController {\n    addController\n  }\n"]))),he=Object(le.a)(A||(A=Object(j.a)(["\n  mutation RemoveController($id: String!) {\n    removeAccount(id: $id) {\n      id\n    }\n  }\n"]))),Oe=Object(le.a)(R||(R=Object(j.a)(["\n  query WithdrawController($id: String!) {\n    withrawController(id: $id)\n  }\n"]))),me=Object(le.a)(q||(q=Object(j.a)(["\n  mutation {\n    removeAccounts\n  }\n"]))),ve=Object(le.a)(D||(D=Object(j.a)(["\n  mutation AddProject($id: String!) {\n    addProject(id: $id) {\n      id\n      status\n    }\n  }\n"]))),ge=Object(le.a)(M||(M=Object(j.a)(["\n  mutation RemoveProject($id: String!) {\n    removeProject(id: $id) {\n      status\n    }\n  }\n"]))),ye=Object(le.a)(L||(L=Object(j.a)(["\n  mutation PaygProject(\n    $paygPrice: String!\n    $paygExpiration: Float!\n    $paygThreshold: Float!\n    $paygOverflow: Float!\n    $id: String!\n  ) {\n    paygProject(\n      paygPrice: $paygPrice\n      paygExpiration: $paygExpiration\n      paygThreshold: $paygThreshold\n      paygOverflow: $paygOverflow\n      id: $id\n    ) {\n      id\n      paygPrice\n      paygExpiration\n      paygThreshold\n      paygOverflow\n    }\n  }\n"]))),we=(Object(le.a)(z||(z=Object(j.a)(["\n  mutation UpdateServices($queryEndpoint: String!, $nodeEndpoint: String!, $id: String!) {\n    updateProjectServices(queryEndpoint: $queryEndpoint, nodeEndpoint: $nodeEndpoint, id: $id) {\n      status\n      nodeEndpoint\n      queryEndpoint\n    }\n  }\n"]))),Object(le.a)(U||(U=Object(j.a)(["\n  query Project($id: String!) {\n    project(id: $id) {\n      id\n      status\n      nodeEndpoint\n      queryEndpoint\n      networkEndpoint\n      networkDictionary\n      nodeVersion\n      queryVersion\n      poiEnabled\n      forceEnabled\n      paygPrice\n      paygExpiration\n      paygThreshold\n      paygOverflow\n    }\n  }\n"])))),ke=Object(le.a)(V||(V=Object(j.a)(["\n  query {\n    getProjects {\n      id\n      status\n      nodeEndpoint\n      queryEndpoint\n      networkEndpoint\n      networkDictionary\n      nodeVersion\n      queryVersion\n      poiEnabled\n      paygPrice\n      paygExpiration\n      paygThreshold\n      paygOverflow\n    }\n  }\n"]))),Ee=Object(le.a)(G||(G=Object(j.a)(["\n  query {\n    channels {\n      id\n      status\n      deploymentId\n      consumer\n      total\n      spent\n      onchain\n      price\n      challengeAt\n      expirationAt\n      lastFinal\n    }\n  }\n"]))),Se=Object(le.a)($||($=Object(j.a)(["\n  mutation ChannelCheckpoint($id: String!) {\n    channelCheckpoint(id: $id) {\n      id\n      spent\n      remote\n      onchain\n    }\n  }\n"]))),Ce=Object(le.a)(F||(F=Object(j.a)(["\n  mutation ChannelClose($id: String!) {\n    channelClose(id: $id) {\n      id\n      spent\n      remote\n      onchain\n      lastFinal\n    }\n  }\n"]))),Ie=Object(le.a)(Y||(Y=Object(j.a)(["\n  query GetLog($container: String!) {\n    getLog(container: $container) {\n      log\n    }\n  }\n"]))),Te=Object(le.a)(H||(H=Object(j.a)(["\n  query QueryMetadata($id: String!) {\n    queryMetadata(id: $id) {\n      lastProcessedHeight\n      lastProcessedTimestamp\n      targetHeight\n      chain\n      indexerHealthy\n      indexerNodeVersion\n      queryNodeVersion\n      indexerStatus\n      queryStatus\n    }\n  }\n"]))),Pe=Object(le.a)(_||(_=Object(j.a)(["\n  query GetIndexerProjects($indexer: String!) {\n    deploymentIndexers(filter: { indexerId: { equalTo: $indexer } }) {\n      nodes {\n        indexerId\n        deploymentId\n        status\n      }\n    }\n  }\n"]))),Ne=Object(le.a)(K||(K=Object(j.a)(["\n  query GetProjectDetails($deploymentId: String!) {\n    deployments(filter: { id: { equalTo: $deploymentId } }) {\n      nodes {\n        id\n        projectId\n        project {\n          owner\n          currentVersion\n          currentDeployment\n          createdTimestamp\n          updatedTimestamp\n          metadata\n        }\n      }\n    }\n  }\n"]))),Ae=Object(le.a)(B||(B=Object(j.a)(["\n  query GetRegistryVersions($range: String!, $registry: String!) {\n    getRegistryVersions(range: $range, registry: $registry)\n  }\n"])));var Re=k((function(){var e=Object(se.a)(de),t=Object(x.a)(e,2),n=t[0],a=t[1],i=a.data,c=a.loading,o=a.error,s=Object(ue.a)(pe),u=Object(x.a)(s,1)[0],l=r.useState(),d=Object(x.a)(l,2),p=d[0],b=d[1];r.useEffect((function(){var e;b(null===i||void 0===i||null===(e=i.accountMetadata)||void 0===e?void 0:e.indexer)}),[i]);var j=r.useCallback(function(){var e=Object(ie.a)(oe.a.mark((function e(t){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({variables:{indexer:t}});case 2:b(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u]);return{indexer:p,updateIndexer:j,load:n,loading:c,error:o}}),{displayName:"Coordinator Indexer"}),qe=Re.useContainer,De=Re.Provider;function Me(){return Object(r.useMemo)((function(){var e;return null===(e=window.ethereum)||void 0===e?void 0:e.isMetaMask}),[window.ethereum])}var Le=function(){return Object(re.b)()};function ze(){var e=Le(),t=e.active,n=e.account,a=e.library;return Object(r.useMemo)((function(){return null===a||void 0===a?void 0:a.getSigner()}),[t,n])}function Ue(){var e=Le(),t=e.active,n=e.library;return Object(r.useMemo)((function(){var e;return null===n||void 0===n||null===(e=n.provider)||void 0===e?void 0:e.isMetaMask}),[t,null===n||void 0===n?void 0:n.provider.isMetaMask])}var Ve,Ge,$e,Fe=n(135);!function(e){e[e.testnet=595]="testnet",e[e.moonbase=1287]="moonbase",e[e.mainnet=1285]="mainnet"}(Ge||(Ge={})),function(e){e.moonbase="moonbase",e.testnet="testnet",e.mainnet="mainnet"}($e||($e={}));var Ye,He=[Ge.moonbase,Ge.testnet,Ge.mainnet],_e={moonbase:Ge.moonbase,testnet:Ge.testnet,mainnet:Ge.mainnet},Ke={595:"https://tc7-eth.aca-dev.network",1285:"https://moonriver.api.onfinality.io/public",1287:"https://moonbeam-alpha.api.onfinality.io/public",31337:"http://127.0.0.1:8545"},Be=($e.testnet,$e.moonbase,$e.mainnet,Ve={},Object(ee.a)(Ve,Ge.testnet,{chainId:Object(Fe.intToHex)(Ge.testnet),chainName:"Acala Testnet",nativeCurrency:{name:"Acala",symbol:"Acala",decimals:18},rpcUrls:[Ke[Ge.testnet]],blockExplorerUrls:["https://blockscout.mandala.acala.network/"]}),Object(ee.a)(Ve,Ge.moonbase,{chainId:Object(Fe.intToHex)(1287),chainName:"Moonbase Alpha",nativeCurrency:{name:"DEV",symbol:"DEV",decimals:18},rpcUrls:[Ke[1287]],blockExplorerUrls:["https://moonbase.moonscan.io/"]}),Ve),We={testnet:ne,moonbase:ne,mainnet:ne};function Xe(e){return{deploymentDetails:We[e],network:e}}var Qe=(Ye={},Object(ee.a)(Ye,Ge.moonbase,Xe($e.moonbase)),Object(ee.a)(Ye,Ge.testnet,Xe($e.testnet)),Object(ee.a)(Ye,Ge.mainnet,Xe($e.mainnet)),Ye);var Je=k((function(e){var t=a.a.useState(),n=Object(x.a)(t,2),r=n[0],i=n[1],c=Le(),o=c.library,s=c.chainId,u=Ue();return a.a.useEffect((function(){if(s&&(t=s,He.includes(null!==t&&void 0!==t?t:0))){var t,n=Qe[s];if(!n||!n.network||!n.deploymentDetails)throw new Error("Invalid sdk options, contracts provider requires network and deploymentDetails");o&&u&&te.ContractSDK.create(o,n).then((function(e){return i(e)})).catch((function(t){e.e("Failed to create ContractSDK instance",t),i(void 0)}))}}),[e,o,s,u]),r}),{displayName:"Contract SDK"}),Ze=Je.useContainer,et=Je.Provider,tt=n(304);n(693);var nt,rt=function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(tt.ReactNotifications,{})})},at=k((function(){var e=Object(r.useState)(),t=Object(x.a)(e,2),n=t[0],a=t[1];return{notification:n,dispatchNotification:function(e){return a(e),tt.Store.addNotification({title:e.title,message:e.message,type:e.type,container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:e.dismiss})},removeNotification:function(e){return tt.Store.removeNotification(e)}}}),{displayName:"Global Notification"}),it=at.useContainer,ct=at.Provider,ot=n(476),st=n(477),ut=n(144),lt=new ot.a({supportedChainIds:[595,1287,1285]}),dt=window.env.NETWORK,pt=new st.a({urls:Ke,defaultChainId:null!==(nt=_e[dt])&&void 0!==nt?nt:Ge.moonbase}),bt=function(e){return new ut.providers.Web3Provider(e)};function jt(e){return ft.apply(this,arguments)}function ft(){return(ft=Object(ie.a)(oe.a.mark((function e(t){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt.isAuthorized();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t(lt));case 4:return e.abrupt("return",t(pt));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xt,ht,Ot,mt,vt,gt,yt,wt,kt=function(){var e=Le().activate,t=Object(r.useCallback)(Object(ie.a)(oe.a.mark((function t(){return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",jt(e));case 1:case"end":return t.stop()}}),t)}))),[e]);return Object(r.useEffect)((function(){t()}),[t]),null},Et=function(e){var t=e.children;return Object(g.jsxs)(re.a,{getLibrary:bt,children:[Object(g.jsx)(kt,{}),t]})},St=n(478),Ct=f.a.img(xt||(xt=Object(j.a)(["\n  width: ","px;\n  height: ","px;\n"])),(function(e){var t=e.size;return null!==t&&void 0!==t?t:30}),(function(e){var t=e.size;return null!==t&&void 0!==t?t:30})),It=function(e){var t=e.src,n=e.size,r=e.url;return r?Object(g.jsx)("a",{href:r,children:Object(g.jsx)(Ct,{size:n,src:t,alt:r})}):Object(g.jsx)(Ct,{size:n,src:t,alt:t})},Tt=n(11),Pt=n(64),Nt=n(158),At=["title","loading","disabled","type"],Rt=f.a.div(ht||(ht=Object(j.a)(["\n  height: ","px;\n  width: ","px;\n  background-color: ",";\n  margin-right: ","px;\n"])),(function(e){var t=e.height;return null!==t&&void 0!==t?t:1}),(function(e){var t=e.width;return null!==t&&void 0!==t?t:1}),(function(e){var t=e.color;return null!==t&&void 0!==t?t:"lightgray"}),(function(e){var t=e.mr;return null!==t&&void 0!==t?t:0})),qt=f.a.div(Ot||(Ot=Object(j.a)(["\n  color: ",";\n  text-align: ",";\n  font-size: ","px;\n  font-weight: ",";\n  margin-left: ","px;\n  margin-right: ","px;\n  margin-top: ","px;\n  margin-bottom: ","px;\n  min-width: ","px;\n  overflow-wrap: break-word;\n"])),(function(e){var t=e.color;return null!==t&&void 0!==t?t:"#1A202C"}),(function(e){return e.alignCenter?"center":"left"}),(function(e){var t=e.size;return null!==t&&void 0!==t?t:18}),(function(e){var t=e.fw;return null!==t&&void 0!==t?t:400}),(function(e){var t=e.ml;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mr;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mt;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mb;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mw;return null!==t&&void 0!==t?t:10})),Dt=f.a.label(mt||(mt=Object(j.a)(["\n  color: ",";\n  text-align: ",";\n  font-size: ","px;\n  font-weight: ",";\n  margin-left: ","px;\n  margin-right: ","px;\n  margin-top: ","px;\n  margin-bottom: ","px;\n  min-width: ","px;\n  font-family: ",";\n"])),(function(e){var t=e.color;return null!==t&&void 0!==t?t:"#1A202C"}),(function(e){return e.alignCenter?"center":"left"}),(function(e){var t=e.size;return null!==t&&void 0!==t?t:15}),(function(e){var t=e.fw;return null!==t&&void 0!==t?t:500}),(function(e){var t=e.ml;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mr;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mt;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mb;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mw;return null!==t&&void 0!==t?t:10}),(function(e){var t=e.ff;return null!==t&&void 0!==t?t:"Futura"})),Mt=Object(f.a)(b.b)(vt||(vt=Object(j.a)(["\n  align-self: ",";\n  min-width: ","px;\n  padding: 16px 50px;\n  margin-top: ","px;\n  margin-bottom: ","px;\n  margin-right: ","px;\n  margin-left: ","px;\n  font-weight: 500;\n"])),(function(e){var t=e.align;return null!==t&&void 0!==t?t:"center"}),(function(e){var t=e.width;return null!==t&&void 0!==t?t:150}),(function(e){var t=e.mt;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mb;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mr;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.ml;return null!==t&&void 0!==t?t:0})),Lt=Object(f.a)(b.e)(gt||(gt=Object(j.a)(["\n  margin-right: 15px;\n"]))),zt=function(e){var t=e.title,n=e.loading,r=e.disabled,a=e.type,i=Object(Pt.a)(e,At);return Object(g.jsx)(Mt,Object(Tt.a)({label:t,type:null!==a&&void 0!==a?a:"secondary",leftItem:n&&Object(g.jsx)(Lt,{size:23,color:"".concat("primary"===a?"#fff":"#4388dd")}),disabled:r||n},i))},Ut=f.a.div(yt||(yt=Object(j.a)(["\n  display: flex;\n  align-items: center;\n  margin-top: ","px;\n  width: 100%;\n  justify-content: ",";\n"])),(function(e){var t=e.mt;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.align;if(!t)return"center";switch(t){case"left":return"flex-start";case"right":return"flex-end";default:return"center"}})),Vt=Object(f.a)(Nt.b)(wt||(wt=Object(j.a)(["\n  margin-top: ","px;\n  width: 100%;\n"])),(function(e){var t=e.mt;return null!==t&&void 0!==t?t:0})),Gt=n.p+"static/media/arrow.8961c2a1.svg",$t=n.p+"static/media/metamask.09e5f554.svg",Ft="UnsupportedChainIdError",Yt="eth_requestAccounts",Ht="wallet_switchEthereumChain",_t="wallet_addEthereumChain";function Kt(e){return Bt.apply(this,arguments)}function Bt(){return(Bt=Object(ie.a)(oe.a.mark((function e(t){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.ethereum){e.next=2;break}return e.abrupt("return","MetaMask is not installed");case 2:return e.prev=2,e.next=5,window.ethereum.request({method:Yt});case 5:return e.next=7,jt(t);case 7:return e.abrupt("return","");case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function Wt(){return Xt.apply(this,arguments)}function Xt(){return(Xt=Object(ie.a)(oe.a.mark((function e(){var t,n,r;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.env.NETWORK,r=_e[n],null!==(t=window)&&void 0!==t&&t.ethereum&&n){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,window.ethereum.request({method:Ht,params:[{chainId:Object(Fe.intToHex)(r)}]});case 7:e.next=18;break;case 9:if(e.prev=9,e.t0=e.catch(4),console.log("e:",e.t0),4902!==e.t0.code){e.next=17;break}return e.next=15,ethereum.request({method:_t,params:[Be[r]]});case 15:e.next=18;break;case 17:console.log("Switch Ethereum network failed",e.t0);case 18:case"end":return e.stop()}}),e,null,[[4,9]])})))).apply(this,arguments)}var Qt,Jt,Zt,en={Chrome:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",Firefox:"https://addons.mozilla.org/en-US/firefox/addon/ether-metamask/",Brave:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",Edge:"https://microsoftedge.microsoft.com/addons/detail/metamask/ejbalbakoplchlghecdalmeeeajnimhm"},tn=function(e){return{install:{title:"Install MetaMask to use Indexer App",desc:"No MetaMask Extension found in the browser.  Please click the button to install the MetaMask Extension before connect with the network.",buttonTitle:"Install MetaMask in the extension market"},connect:{title:"Connect wallet to use Indexer App",desc:"Use the indexer app to connect with Subquery network, you can manage you accounts and projects inside the app.",buttonTitle:"Connect with MetaMask browser extension"},invalidAccount:{title:"Incorrect connected account with coordinator service",desc:"Please switch the connect account to ".concat(e),buttonTitle:"Switch account to use the admin app"},invalidNetwork:{title:"Unsupportted network Type",desc:"MetaMask connect with an unsupported network, please press the button to swith to the correct network",buttonTitle:"Swtich to the supportted network"}}},nn=f.a.div(Qt||(Qt=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  width: 100%;\n  margin-top: -100px;\n"]))),rn=f.a.div(Jt||(Jt=Object(j.a)(["\n  display: flex;\n  padding: 24px;\n  align-items: center;\n  justify-content: space-between;\n  min-width: 450px;\n  cursor: pointer;\n"]))),an=f.a.div(Zt||(Zt=Object(j.a)(["\n  display: flex;\n  align-items: center;\n"]))),cn=function(){var e=Le(),t=e.account,n=e.activate,a=e.error,i=qe().indexer,c=Ue(),o=Me(),s=Object(r.useState)(!1),u=Object(x.a)(s,2),l=u[0],d=u[1],p=Object(r.useState)(""),b=Object(x.a)(p,2),j=b[0],f=b[1];Object(r.useEffect)((function(){d((null===a||void 0===a?void 0:a.name)===Ft)}),[a]);var h=Object(r.useMemo)((function(){var e=tn(i),t=e.install,n=e.connect,r=e.invalidNetwork,a=e.invalidAccount;return o?l?r:c?a:n:t}),[l,o,c,t,i]),O=Object(r.useCallback)(Object(ie.a)(oe.a.mark((function e(){var t,r,a;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=4;break}return e.next=3,Wt();case 3:return e.abrupt("return");case 4:if(o){e.next=8;break}return(r=null!==(t=en[St.browserName])&&void 0!==t?t:"")&&window.open(r,"_blank","noopener,noreferrer"),e.abrupt("return");case 8:if(c){e.next=13;break}return e.next=11,Kt(n);case 11:a=e.sent,f(a);case 13:case"end":return e.stop()}}),e)}))),[c,l,o]),m=Object(r.useMemo)((function(){return Object(g.jsxs)(rn,{children:[Object(g.jsxs)("div",{children:[Object(g.jsxs)(an,{children:[Object(g.jsx)(It,{size:50,src:$t}),Object(g.jsx)(Dt,{ml:20,size:25,children:"MetaMask"})]}),Object(g.jsx)(qt,{mt:10,children:h.buttonTitle})]}),Object(g.jsx)(It,{size:30,src:Gt})]})}),[h]);return Object(g.jsxs)(nn,{children:[Object(g.jsx)(Dt,{alignCenter:!0,size:35,fw:"400",children:h.title}),Object(g.jsx)(qt,{alignCenter:!0,mt:15,children:h.desc}),Object(g.jsx)(qt,{color:"red",alignCenter:!0,mt:15,children:j}),Object(g.jsx)(zt,{mt:50,type:"secondary",title:"",onClick:O,leftItem:m})]})},on=n(1049),sn=n(1092),un="".concat(window.location.protocol,"//").concat(window.location.hostname,":").concat(window.env.COORDINATOR_SERVICE_PORT,"/graphql"),ln=__DEV__?window.env.COORDINATOR_SERVICE_URL:un,dn="".concat(window.location.protocol,"//").concat(window.location.hostname);function pn(e){return new on.a({uri:e,cache:new sn.a,defaultOptions:{watchQuery:{fetchPolicy:"network-only"}}})}var bn,jn,fn,xn,hn,On,mn,vn,gn,yn,wn,kn,En=n(215),Sn=n.n(En),Cn=function(e){var t=e.size,n=e.address;return Object(g.jsx)(Sn.a,{diameter:t,seed:Object(En.jsNumberForAddress)(n)})},In=function(e){var t=e.title,n=e.desc,a=e.buttons,i=e.name,c=e.account,o=Object(r.useMemo)((function(){return a.map((function(e){var t=e.title,n=e.type,r=e.loading,a=e.disabled,i=e.onClick;return Object(g.jsx)(zt,{width:230,mb:20,title:t,loading:r,disabled:a,onClick:function(){return i(n)}},n)}))}),[a]);return Object(g.jsxs)(Tn,{children:[Object(g.jsxs)("div",{children:[Object(g.jsx)(Pn,{children:Object(g.jsx)(Nn,{children:Object(g.jsx)(qt,{size:30,fw:"bold",mr:20,children:t})})}),c?Object(g.jsxs)(Nn,{children:[Object(g.jsx)(Cn,{address:null!==c&&void 0!==c?c:"",size:100}),Object(g.jsxs)(An,{ml:20,children:[Object(g.jsx)(qt,{children:i}),Object(g.jsx)(qt,{mt:10,children:c}),Object(g.jsx)(qt,{mt:10,children:n})]})]}):Object(g.jsxs)(An,{children:[Object(g.jsx)(qt,{color:"gray",size:15,mb:30,children:n}),!Object(ae.isEmpty)(a)&&Object(g.jsx)(Ut,{align:"left",children:o})]})]}),!!c&&!Object(ae.isEmpty)(a)&&Object(g.jsx)(Rn,{children:o})]},t)},Tn=f.a.div(bn||(bn=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  min-width: 1000px;\n  min-height: 250px;\n  width: 70%;\n  border: thin solid;\n  border-color: lightgray;\n  border-radius: 15px;\n  padding: 40px;\n  margin-bottom: 30px;\n  :hover {\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n  }\n"]))),Pn=f.a.div(jn||(jn=Object(j.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 30px;\n"]))),Nn=f.a.div(fn||(fn=Object(j.a)(["\n  display: flex;\n  align-items: center;\n"]))),An=f.a.div(xn||(xn=Object(j.a)(["\n  display: flex;\n  width: 80%;\n  flex-direction: column;\n  margin-left: ","px;\n"])),(function(e){var t=e.ml;return null!==t&&void 0!==t?t:0})),Rn=f.a.div(hn||(hn=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),qn=n(286),Dn=n.n(qn),Mn=n(1086),Ln=n(1085),zn=f.a.div(On||(On=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n  border-radius: 18px;\n  background-color: white;\n  margin-bottom: 50px;\n  padding: 60px;\n  min-width: 650px;\n  min-height: 450px;\n"]))),Un=(f.a.div(mn||(mn=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),f.a.div(vn||(vn=Object(j.a)(["\n  margin-top: ","px;\n  width: 450px;\n"])),(function(e){var t;return null!==(t=e.mt)&&void 0!==t?t:0})),Object(f.a)(Mn.a)(gn||(gn=Object(j.a)(["\n  width: 55%;\n  margin-bottom: 70px;\n  min-width: 650px;\n  max-width: 70%;\n"]))));Object(f.a)(Ln.a)(yn||(yn=Object(j.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: space-between;\n  min-width: 600px;\n  margin-top: 30px;\n"])));!function(e){e.onboarding="onboarding",e.authorisation="authorisation",e.register="register",e.sync="sync"}(wn||(wn={})),function(e){e.wait="wait",e.process="process",e.finish="finish"}(kn||(kn={}));var Vn,Gn,$n,Fn,Yn,Hn,_n,Kn,Bn,Wn,Xn=Object.entries(wn).map((function(e){return Object(x.a)(e,1)[0]})).slice(1),Qn=function(e){return Xn.findIndex((function(t){return t===e}))},Jn=function(e,t){return e===t?kn.process:e>t?kn.finish:kn.wait},Zn=n.p+"static/media/cross.9aeef195.svg",er=f.a.div(Vn||(Vn=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 20px;\n"]))),tr=Object(f.a)(Nt.a)(Gn||(Gn=Object(j.a)(["\n  border-radius: 5px;\n  border: thin solid lightgray;\n  padding: 5px 10px;\n  margin-top: 5px;\n  font-size: 16px;\n"]))),nr=f.a.option($n||($n=Object(j.a)(["\n  padding: 10px 10px;\n  background-color: green;\n"]))),rr=function(e){var t=e.title,n=e.initialValue,a=e.placeholder,i=e.fieldKey,c=e.setFieldValue,o=e.options,s=e.errors,u=Object(r.useState)(n),l=Object(x.a)(u,2),d=l[0],p=l[1];return Object(g.jsxs)(er,{children:[Object(g.jsx)(Dt,{htmlFor:i,children:t}),!o&&Object(g.jsx)(tr,{placeholder:a,name:i}),!!o&&Object(g.jsx)(tr,{as:"select",name:i,onChange:function(e){var t=e.target.value;c&&c(i,t),p(t)},value:d,children:o.map((function(e){return Object(g.jsx)(nr,{value:e,children:e},e)}))},i),!(null===s||void 0===s||!s[i])&&Object(g.jsx)(qt,{mt:5,color:"red",size:15,children:s[i]})]})},ar={content:{backgroundColor:"white",borderRadius:15,top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",maxWidth:900,minWidth:700,maxHeight:"90%",padding:0},overlay:{zIndex:50,backgroundColor:"rgba(0, 0, 0, 0.65)"}},ir=function(e){var t=e.visible,n=e.title,r=e.onClose,a=e.currentStep,i=void 0===a?0:a,c=e.steps,o=e.type,s=e.loading;if(!c||i>c.length-1)return null;var u,l=c[i];return Object(g.jsxs)(Dn.a,{isOpen:t,style:ar,closeTimeoutMS:200,ariaHideApp:!1,children:[Object(g.jsxs)(or,{onClick:r,children:[Object(g.jsx)(qt,{fw:"500",size:20,children:n}),Object(g.jsx)(sr,{children:Object(g.jsx)(It,{size:18,src:Zn})})]}),Object(g.jsxs)(cr,{children:[(null===c||void 0===c?void 0:c.length)>1&&Object(g.jsx)(ur,{size:"small",current:i,children:c.map((function(e,t){return Object(g.jsx)(Un.Step,{status:Jn(i,t),title:e.buttonTitle},e.title)}))}),l.form?(u=l,u.form?Object(g.jsx)(Nt.c,{initialValues:u.form.formValues,validationSchema:u.form.schema,onSubmit:u.form.onFormSubmit,children:function(e){var t,n=e.status,r=e.errors,a=e.submitForm,i=e.setFieldValue,c=e.initialValues;return Object(g.jsxs)(lr,{children:[Object(g.jsxs)("div",{children:[null===(t=u.form)||void 0===t?void 0:t.items.map((function(e){var t=e.title,n=void 0===t?"":t,a=e.formKey,o=void 0===a?"":a,s=e.placeholder,u=void 0===s?"":s,l=e.options;return Object(g.jsx)(rr,{title:n,fieldKey:o,initialValue:c[o],placeholder:u,setFieldValue:i,options:l,errors:r},n)})),u.desc&&Object(g.jsx)(qt,{mt:20,size:13,color:"gray",children:u.desc})]}),Object(g.jsx)(Ut,{align:"right",mt:50,children:Object(g.jsx)(zt,{width:260,mt:0,title:u.buttonTitle,onClick:a,loading:s||(null===n||void 0===n?void 0:n.loading)})})]})}}):null):function(e){return Object(g.jsxs)(dr,{children:[Object(g.jsxs)(pr,{children:[Object(g.jsx)(qt,{fw:"500",mt:10,size:25,children:e.title}),Object(g.jsx)(qt,{alignCenter:!0,mt:20,size:15,color:"gray",children:e.desc})]}),Object(g.jsx)(Ut,{align:"right",mt:60,children:Object(g.jsx)(zt,{width:200,title:e.buttonTitle,onClick:function(){return e.onClick&&e.onClick(o)},loading:s})})]})}(l)]})]})},cr=f.a.div(Fn||(Fn=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  padding: 32px;\n  padding-bottom: 52px;\n"]))),or=f.a.div(Yn||(Yn=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-content: center;\n  padding: 16px 32px;\n  border-bottom: 1px solid var(--sq-gray300);\n"]))),sr=f.a.div(Hn||(Hn=Object(j.a)(["\n  margin-top: 5px;\n"]))),ur=Object(f.a)(Mn.a)(_n||(_n=Object(j.a)(["\n  width: 100%;\n  min-width: 350px;\n  margin-bottom: 40px;\n"]))),lr=Object(f.a)(Nt.b)(Kn||(Kn=Object(j.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: space-between;\n"]))),dr=f.a.div(Bn||(Bn=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n"]))),pr=f.a.div(Wn||(Wn=Object(j.a)(["\n  display: flex;\n  width: 80%;\n  flex-direction: column;\n  align-items: center;\n"]))),br=n(156),jr=n(75),fr="0x0000000000000000000000000000000000000000",xr="Contract SDK or Signer not initialised",hr="Controller account is used by an indexer already",Or="Invalid deploymentId provided",mr="Amount can not be empty",vr="Controller can not be empty";function gr(e,t,n){return yr.apply(this,arguments)}function yr(){return(yr=Object(ie.a)(oe.a.mark((function e(t,n,r){var a;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}throw new Error(xr);case 2:if(r){e.next=4;break}throw new Error(mr);case 4:return e.next=6,t.sqToken.connect(n).increaseAllowance(t.staking.address,ut.utils.parseEther(r));case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wr(e,t,n,r,a){return kr.apply(this,arguments)}function kr(){return(kr=Object(ie.a)(oe.a.mark((function e(t,n,r,a,i){var c;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}throw new Error(xr);case 2:if(r){e.next=4;break}throw new Error(mr);case 4:return e.next=6,t.indexerRegistry.connect(n).registerIndexer(ut.utils.parseEther(r),a,i);case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Er(){return(Er=Object(ie.a)(oe.a.mark((function e(t,n,r){var a;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}throw new Error(xr);case 2:return e.next=4,t.indexerRegistry.connect(n).updateMetadata(r);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sr(){return(Sr=Object(ie.a)(oe.a.mark((function e(t,n){var r;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}throw new Error(xr);case 2:return r=t.indexerRegistry.connect(n).unregisterIndexer(),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cr(){return(Cr=Object(ie.a)(oe.a.mark((function e(t,n,r){var a;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}throw new Error(xr);case 2:if(r){e.next=4;break}throw new Error(vr);case 4:return e.next=6,t.indexerRegistry.controllerToIndexer(r);case 6:if(e.sent===fr){e.next=9;break}throw new Error(hr);case 9:return e.next=11,t.indexerRegistry.connect(n).setControllerAccount(r);case 11:return a=e.sent,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ir(){return(Ir=Object(ie.a)(oe.a.mark((function e(t,n,r){var a;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}throw new Error(xr);case 2:if(r){e.next=4;break}throw new Error(Or);case 4:return e.next=6,t.queryRegistry.connect(n).startIndexing(Object(jr.d)(r));case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tr(){return(Tr=Object(ie.a)(oe.a.mark((function e(t,n,r){var a;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}throw new Error(xr);case 2:if(r){e.next=4;break}throw new Error(Or);case 4:return e.next=6,t.queryRegistry.connect(n).updateIndexingStatusToReady(Object(jr.d)(r));case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pr(){return(Pr=Object(ie.a)(oe.a.mark((function e(t,n,r){var a;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}throw new Error(xr);case 2:if(r){e.next=4;break}throw new Error(Or);case 4:return e.next=6,t.queryRegistry.connect(n).stopIndexing(Object(jr.d)(r));case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Nr,Ar,Rr,qr,Dr,Mr,Lr,zr=function(){var e=Le().account,t=Object(r.useState)(),n=Object(x.a)(t,2),a=n[0],i=n[1],c=Ze(),o=Object(r.useCallback)(Object(ie.a)(oe.a.mark((function t(){var n;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&c){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,null===c||void 0===c?void 0:c.indexerRegistry.isIndexer(e);case 5:n=t.sent,i(n),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),i(!1);case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),[e,c]);return Object(r.useEffect)((function(){o()}),[o]),a},Ur=function(){var e=function(){var e=qe().indexer,t=Le().account;return Object(r.useMemo)((function(){return!!t&&!!e&&t===e}),[t,e])}(),t=zr();return Object(r.useMemo)((function(){return e&&t}),[e,t])},Vr=function(){var e=Object(r.useState)(),t=Object(x.a)(e,2),n=t[0],a=t[1],i=Le().account,c=Ze(),o=Object(r.useCallback)(Object(ie.a)(oe.a.mark((function e(){var t;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===c||void 0===c?void 0:c.indexerRegistry.indexerToController(null!==i&&void 0!==i?i:"");case 3:t=e.sent,a(t===fr?"":t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a(void 0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[i,c]);return Object(r.useEffect)((function(){o()}),[o]),{controller:n,getController:o}},Gr=function(e,t){var n=Object(r.useState)("0.00"),a=Object(x.a)(n,2),i=a[0],c=a[1],o=Ze(),s=Object(r.useCallback)(Object(ie.a)(oe.a.mark((function t(){var n,r;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o&&e){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,o.sqToken.balanceOf(e);case 5:n=t.sent,r=Number(Object(br.c)(n,18)).toFixed(2),c(r),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.error("Get token balance failed for:",e);case 13:case"end":return t.stop()}}),t,null,[[2,10]])}))),[e,o]);return Object(r.useEffect)((function(){s()}),[s,t]),{tokenBalance:i,getTokenBalance:s}},$r=function(e){var t=Object(r.useState)(),n=Object(x.a)(t,2),a=n[0],i=n[1],c=Le().library,o=Object(r.useCallback)(Object(ie.a)(oe.a.mark((function t(){var n,r;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&c){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,null===c||void 0===c?void 0:c.getBalance(e);case 5:n=t.sent,r=Number(Object(br.c)(n,18)).toFixed(4),i(r),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.error("Get balance failed for:",e);case 13:case"end":return t.stop()}}),t,null,[[2,10]])}))),[e]);return Object(r.useEffect)((function(){o()}),[o]),a},Fr=function(){var e=Le().account,t=Ze(),n=Object(r.useState)(),a=Object(x.a)(n,2),i=a[0],c=a[1],o=Object(r.useCallback)(Object(ie.a)(oe.a.mark((function n(){var r,a;return oe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,null===t||void 0===t?void 0:t.indexerRegistry.metadataByIndexer(e);case 5:if(r=n.sent){n.next=8;break}return n.abrupt("return");case 8:return n.next=10,Object(jr.c)(Object(jr.b)(r));case 10:a=n.sent,c(a),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(2),console.error("Failed to get indexer metadata");case 17:case"end":return n.stop()}}),n,null,[[2,14]])}))),[t,e]);return Object(r.useEffect)((function(){o()}),[o]),{metadata:i,fetchMetadata:o}},Yr=function(){var e=Le().chainId;return Object(r.useMemo)((function(){return 595===e?"ACA":"DEV"}),[e])};!function(e){e.query="onfinality/subql-query",e.substrateNode="onfinality/subql-node",e.cosmos="onfinality/subql-node-cosmos",e.avalanche="onfinality/subql-node-avalanche"}(Nr||(Nr={})),function(e){e[e.NOTINDEXING=0]="NOTINDEXING",e[e.INDEXING=1]="INDEXING",e[e.READY=2]="READY"}(Ar||(Ar={})),function(e){e.NotIndexing="NOT INDEXING",e.Started="STARTED",e.Indexing="INDEXING",e.Ready="READY",e.Terminated="TERMINATED"}(Rr||(Rr={})),function(e){e.Open="OPEN",e.Close="CLOSE"}(qr||(qr={})),function(e){e.unregister="unregister",e.updateMetaData="updateMetadata"}(Dr||(Dr={})),function(e){e.addProject="addProject"}(Mr||(Mr={})),function(e){e.StartIndexing="StartIndexing",e.AnnounceIndexing="AnnounceIndexing",e.RestartProject="RestartProject",e.AnnounceReady="AnnounceReady",e.StopProject="StopProject",e.AnnounceNotIndexing="AnnounceNotIndexing",e.StopIndexing="StopIndexing",e.RemoveProject="Remove Project",e.PaygOpen="Open PAYG",e.PaygChangePrice="Change Price",e.PaygClose="Close PAYG"}(Lr||(Lr={}));var Hr,_r,Kr,Br,Wr,Xr,Qr=n(71);!function(e){e.name="name",e.proxyEndpoint="proxyEndpoint",e.amount="amount",e.rate="rate"}(Xr||(Xr={}));var Jr,Zr=Qr.c((Hr={},Object(ee.a)(Hr,Xr.name,Qr.d().defined()),Object(ee.a)(Hr,Xr.proxyEndpoint,Qr.d().defined()),Object(ee.a)(Hr,Xr.amount,Qr.b().min(1e3,"Staking token should large than 1000 SQT").defined()),Object(ee.a)(Hr,Xr.rate,Qr.b().min(0,"Rate should be between 0 and 100").max(100,"Rate should be between 0 and 100").defined()),Hr)),ea=(_r={},Object(ee.a)(_r,Xr.name,""),Object(ee.a)(_r,Xr.proxyEndpoint,""),Object(ee.a)(_r,Xr.amount,0),Object(ee.a)(_r,Xr.rate,0),_r);!function(e){e.name="name",e.proxyEndpoint="proxyEndpoint"}(Jr||(Jr={}));var ta,na=Qr.c((Kr={},Object(ee.a)(Kr,Xr.name,Qr.d().defined()),Object(ee.a)(Kr,Xr.proxyEndpoint,Qr.d().defined()),Kr)),ra=function(e){var t;return t={},Object(ee.a)(t,Xr.name,null===e||void 0===e?void 0:e.name),Object(ee.a)(t,Xr.proxyEndpoint,null===e||void 0===e?void 0:e.url),t};!function(e){e.privateKey="privateKey"}(ta||(ta={}));var aa;Qr.c(Object(ee.a)({},ta.privateKey,Qr.d().defined())),Object(ee.a)({},ta.privateKey,"");!function(e){e.deploymentId="deploymentId",e.networkEndpoint="networkEndpoint",e.networkDictionary="networkDictionary",e.nodeVersion="nodeVersion",e.queryVersion="queryVersion",e.poiEnabled="poiEnabled",e.forceEnabled="forceEnabled",e.paygPrice="paygPrice",e.paygExpiration="paygExpiration",e.paygThreshold="paygThreshold",e.paygOverflow="paygOverflow"}(aa||(aa={}));var ia,ca,oa,sa,ua,la,da=new RegExp(/^Qm[1-9A-HJ-NP-Za-km-z]{44}/i),pa=Qr.c(Object(ee.a)({},aa.deploymentId,Qr.d().matches(da,"Invalid deployment id format").defined())),ba=Object(ee.a)({},aa.deploymentId,""),ja=function(e){var t,n;return n={},Object(ee.a)(n,aa.networkEndpoint,e.networkEndpoint),Object(ee.a)(n,aa.networkDictionary,null!==(t=e.networkDictionary)&&void 0!==t?t:""),Object(ee.a)(n,aa.nodeVersion,e.nodeVersion),Object(ee.a)(n,aa.queryVersion,e.queryVersion),Object(ee.a)(n,aa.poiEnabled,e.poiEnabled),Object(ee.a)(n,aa.forceEnabled,e.forceEnabled),Object(ee.a)(n,aa.paygPrice,e.paygPrice),Object(ee.a)(n,aa.paygExpiration,e.paygExpiration),Object(ee.a)(n,aa.paygThreshold,e.paygThreshold),Object(ee.a)(n,aa.paygOverflow,e.paygOverflow),n},fa=Qr.c((Br={},Object(ee.a)(Br,aa.networkEndpoint,Qr.d().defined()),Object(ee.a)(Br,aa.networkDictionary,Qr.d().optional()),Object(ee.a)(Br,aa.nodeVersion,Qr.d().defined()),Object(ee.a)(Br,aa.queryVersion,Qr.d().defined()),Object(ee.a)(Br,aa.poiEnabled,Qr.a().required()),Object(ee.a)(Br,aa.forceEnabled,Qr.a().required()),Br)),xa=Qr.c((Wr={},Object(ee.a)(Wr,aa.paygPrice,Qr.d().defined()),Object(ee.a)(Wr,aa.paygExpiration,Qr.b().defined()),Object(ee.a)(Wr,aa.paygThreshold,Qr.b().defined()),Object(ee.a)(Wr,aa.paygOverflow,Qr.b().defined()),Wr)),ha=(ia={},Object(ee.a)(ia,Dr.unregister,"Unregister"),Object(ee.a)(ia,Dr.updateMetaData,"Update Metadata"),ia),Oa=function(e,t){return{title:ha[e],type:e,onClick:t}},ma=(ca={},Object(ee.a)(ca,Dr.updateMetaData,"Update Indexer Metadata"),Object(ee.a)(ca,Dr.unregister,"Unregister Indexer Account"),ca);!function(e){e.configController="configController",e.removeAccount="removeAccount",e.withdraw="widthdraw"}(oa||(oa={})),function(e){e.MetadataUpated="MetadataUpated",e.ControllerUpdated="ControllerUpdated"}(sa||(sa={})),function(e){e.NotIndexing="NotIndexing",e.Started="Started",e.Indexing="Indexing",e.Ready="Ready",e.Terminated="Terminated"}(ua||(ua={})),function(e){e.Loading="Loading",e.Succeed="Succeed",e.Failed="Failed"}(la||(la={}));var va,ga,ya,wa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{duration:e,onScreen:t}},ka={startProject:{title:"Indexing Project",desc:"Start indexing project will start the subquery node service indexing the project and start a query service at the same time. It takes around 1 mins to start the services, you can see the progress and related information after everything is ready."},stopProject:{title:"Stop Indexing the Project",desc:"Stop indexing the project will terminate the node and query services, once the services stopped, the service status will change to terminated. You can restart indexing the project at any time."},restartProject:{title:"Restart Project",desc:"Restart indexing project will start the previous subquery node service to index the project, and start a query service at the same time. You can see the progress and related information after everything is ready."},removeProject:{title:"Are you sure to remove the project",desc:"Remove project will remove the project and service containers from coordinator service and database, the indexing data will be removed at the same time. You can add the project back at any time, but need to indexing from the beginning."},announceIndexing:{title:"Update Status on Subquery Network",desc:"Send transaction to start indexing the project on contract, the controller account on coordinator service will start to update the status of indexing service on the contract once the transaction completed. The transaction processing time may take around 10s, it depends on the network and gas fee. You will see the processing status on the top of the page once you confim the transaction on the MetaMask."},announceReady:{title:"Update Indexing To Ready",desc:"Send transaction to change indexing status to ready on contract, the explorer will display you query endpoint once the transaction completed. The transaction processing time may take around 10s, it depends on the network and gas fee. You will see the processing status on the top of the page once you confim the transaction on the MetaMask."},announceNotIndexing:{title:"Announce Not Indexing the Project",desc:"Send transaction to change indexing status to not indexing on contract, the project status will change to not indexing on the network. The transaction processing time may take around 10s, it depends on the network and gas fee. You will see the processing status on the top of the page once you confim the transaction on the MetaMask."},paygOpen:{title:"Open PAYG",desc:"This will open the function of pay-as-you-go, which supports micro-payment and instant requests. The query service will based on HTTP and p2p network at the same time. If consumer establish the service, the service will be in the form of state channel. the price is the cost of per query"},paygChangePrice:{title:"Change Price",desc:"This will modify the cost of per query, the price of the established state channel will remain unchanged, and the new state channel will use the new price"},paygClose:{title:"Close PAYG",desc:"This will turn off the function of pay-as-you-go, the already established state channel will not be affected, and the new state channel will not be established."}},Ea=function(e,t,n){return{title:e,action:t,color:n}},Sa=(va={},Object(ee.a)(va,Lr.StartIndexing,"Start Indexing Project"),Object(ee.a)(va,Lr.RestartProject,"Restart Indexing Project"),Object(ee.a)(va,Lr.AnnounceIndexing,"Announce Indexing Project"),Object(ee.a)(va,Lr.AnnounceReady,"Publish Indexing to Ready"),Object(ee.a)(va,Lr.StopProject,"Stop Project"),Object(ee.a)(va,Lr.RemoveProject,"Remove Project"),Object(ee.a)(va,Lr.AnnounceNotIndexing,"Announce Not Indexing Project"),Object(ee.a)(va,Lr.StopIndexing,"Stop Indexing"),Object(ee.a)(va,Lr.PaygOpen,"Open PAYG"),Object(ee.a)(va,Lr.PaygChangePrice,"Change Price"),Object(ee.a)(va,Lr.PaygClose,"Close PAYG"),va),Ca=function(e,t,n){return{formValues:ja(e),schema:fa,onFormSubmit:n,items:[{formKey:aa.networkEndpoint,title:"Indexing Network Endpiont",placeholder:"wss://polkadot.api.onfinality.io/public-ws"},{formKey:aa.networkDictionary,title:"Network Dictionary Endpiont",placeholder:"https://api.subquery.network/sq/subquery/dictionary-polkadot"},{formKey:aa.nodeVersion,title:"Node Image Version",options:t.node},{formKey:aa.queryVersion,title:"Query Image Version",options:t.query},{formKey:aa.poiEnabled,title:"Enable POI",options:["true","false"]},{formKey:aa.forceEnabled,title:"Enable Force Start",options:["true","false"]}]}},Ia=function(e,t){return{formValues:ja(e),schema:xa,onFormSubmit:t,items:[{formKey:aa.paygPrice,title:"Set Price (Units: SQT)",placeholder:"1.0000"},{formKey:aa.paygExpiration,title:"Minimum expiration time",placeholder:"3600"},{formKey:aa.paygThreshold,title:"Count of automatic checkpoint to chain",placeholder:"1000"},{formKey:aa.paygOverflow,title:"Maximum allowed conflict count",placeholder:"5"}]}},Ta=(ga={},Object(ee.a)(ga,Rr.Started,{title:"Ready to indexing the project on Suquery Network",description:"The current project has been alreay started, check the progress and logs make sure indexing is alright. Try press the Announce Indexing button to annouce indexing this project on Subquery Network. You can also try to restart indexing if something wrong happens."}),Object(ee.a)(ga,Rr.Terminated,{title:"Status Inconsistent",description:"The current indexing service for this project is terminated but the indexing service status on Subquery Network is still INDEXING, we encourage you to press the Announce NotIndexing button to change the online status to NOTINDEXING as well"}),ga),Pa=(ya={},Object(ee.a)(ya,ua.Started,{type:"success",title:"Project is starting",message:"Starting project may take around 5 seconds",dismiss:wa()}),Object(ee.a)(ya,ua.Terminated,{type:"success",title:"Project Terminated",message:"The project has been stopped, you can restart or update the status on network to not indexing",dismiss:wa()}),ya),Na=function(e){var t=e.length;return"".concat(e.substring(0,15),"...").concat(e.substring(t-16,t-1))};function Aa(e,t){return{type:"default",title:e,message:"Processing transaction may take around 20s: ".concat(Na(t)),dismiss:wa(5e4,!0)}}function Ra(e){return{type:"success",title:"Transaction Succeed",message:"".concat(e.toLowerCase()," completed"),dismiss:wa()}}function qa(e){return{type:"danger",title:"Transaction Failed",message:"".concat(e),dismiss:wa()}}function Da(e,t,n,r,a){return Ma.apply(this,arguments)}function Ma(){return(Ma=Object(ie.a)(oe.a.mark((function e(t,n,r,a,i){var c,o,s;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.dispatchNotification,o=r.removeNotification,s=c(Aa(t,n.hash)),e.prev=2,e.next=5,n.wait(1);case 5:e.sent.status?(a&&a(),c(Ra(t))):(i&&i(),c(qa(n.hash))),o(s),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("Transaction Failed:",e.t0),c(qa(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}var La=Object(Tt.a)(Object(Tt.a)({},ma),{},Object(ee.a)({},oa.configController,"Update Controller")),za=function(){var e=ze(),t=Ze(),n=it(),a=Object(r.useCallback)((function(n){var r;return r={},Object(ee.a)(r,Dr.updateMetaData,(function(){return function(e,t,n){return Er.apply(this,arguments)}(t,e,n)})),Object(ee.a)(r,Dr.unregister,(function(){return function(e,t){return Sr.apply(this,arguments)}(t,e)})),Object(ee.a)(r,oa.configController,(function(){return function(e,t,n){return Cr.apply(this,arguments)}(t,e,n)})),r}),[t,e]);return Object(r.useCallback)(function(){var e=Object(ie.a)(oe.a.mark((function e(t,r,i,c){var o,s,u;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=a(r)[t],s=La[t],e.next=5,o();case 5:return u=e.sent,i(),e.next=9,Da(s,u,n,c);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),i(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),[a])},Ua=function(e){var t=ze(),n=Ze(),a=it(),i=Object(r.useMemo)((function(){var r;return r={},Object(ee.a)(r,Lr.AnnounceIndexing,(function(){return function(e,t,n){return Ir.apply(this,arguments)}(n,t,e)})),Object(ee.a)(r,Lr.AnnounceReady,(function(){return function(e,t,n){return Tr.apply(this,arguments)}(n,t,e)})),Object(ee.a)(r,Lr.AnnounceNotIndexing,(function(){return function(e,t,n){return Pr.apply(this,arguments)}(n,t,e)})),r}),[n,t,e]);return Object(r.useCallback)(function(){var e=Object(ie.a)(oe.a.mark((function e(t,n,r){var c,o,s;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=i[t],o=Sa[t],e.next=5,c();case 5:return s=e.sent,n(),e.next=9,Da(o,s,a,r);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),n(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n,r){return e.apply(this,arguments)}}(),[i])};var Va,Ga,$a,Fa,Ya,Ha,_a,Ka,Ba,Wa,Xa,Qa,Ja,Za,ei,ti,ni,ri,ai,ii,ci,oi={controller:{type:"danger",title:"Insufficient Balance",message:"The controller account has insufficient assets to pay the transaction fee. Please top up your controller account ASAP.",dismiss:wa(5e4,!1)}},si={indexer:{title:"Indexer Account",name:"Subquery Master",buttonTitle:"Unregister",desc:""},controller:{title:"Controller Account",name:"Controller",buttonTitle:"Update Controller",desc:""},emptyController:{title:"Controller Account",name:"",buttonTitle:"Config Controller",desc:"Controller account is a delegator of the indexer, need to config a controller account before you start the journey to indexing the projects, controller account will config in you coordinator service and send the status of the indexing services to the contract autimatically"}},ui=f.a.div(Va||(Va=Object(j.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 0px 50px;\n  min-height: 630px;\n"]))),li=function(){var e=Object(r.useState)(!1),t=Object(x.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(0),c=Object(x.a)(i,2),o=c[0],s=c[1],u=Object(r.useState)(),d=Object(x.a)(u,2),p=d[0],b=d[1],j=Le().account,f=Ur(),h=qe().indexer,O=Fr(),m=O.metadata,v=O.fetchMetadata,y=za(),w=Ue(),k=function(e){var t=Object(r.useState)(!1),n=Object(x.a)(t,2),a=n[0],i=n[1],c=Ze();return Object(r.useEffect)((function(){null===c||void 0===c||c.indexerRegistry.isController(null!==e&&void 0!==e?e:"").then((function(e){return i(e)})).catch((function(){return i(!1)}))}),[e,c]),a}(j),E=Vr().controller,S=$r(E),C=$r(j),I=it().dispatchNotification,T=X().setPageLoading,P=Object(l.g)(),N=Yr(),A=Object(ue.a)(me),R=Object(x.a)(A,1)[0];si.controller.desc="Balance: ".concat(S," ").concat(N);var q=E?si.controller:si.emptyController,D=si.indexer;Object(r.useEffect)((function(){T(Object(ae.isUndefined)(j)||Object(ae.isUndefined)(h))}),[j,h]),Object(r.useEffect)((function(){!S||parseFloat(S)>parseFloat("0.8")||I(oi.controller)}),[S]);var M,L=function(e){b(e),a(!0)},z=function(){a(!1),setTimeout((function(){return s(0)}),1e3)},U=Object(r.useMemo)((function(){var e;return null!==(e=null===m||void 0===m?void 0:m.name)&&void 0!==e?e:" "}),[m]),V=[Oa(Dr.updateMetaData,L),Oa(Dr.unregister,L)],G=[{title:"Manange Controllers",onClick:function(){return P.push("/controller-management")}}],$=Object(r.useMemo)((function(){return function(e,t){return Object(ee.a)({},Dr.updateMetaData,[{index:0,title:"Update Indexer Metadata",desc:"Input valid indexer name and proxy server endpoint to update the metadata, make sure the proxy endpoint is valid",buttonTitle:"Update Metadata",form:{formValues:ra(t),schema:na,onFormSubmit:e,items:[{formKey:Jr.name,title:"Indexer Name"},{formKey:Jr.proxyEndpoint,title:"Proxy Server Endpoint"}]}}])}(function(){var e=Object(ie.a)(oe.a.mark((function e(t,n){var r,a,i;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setStatus({loading:!0}),r=t[Jr.name],a=t[Jr.proxyEndpoint],e.next=5,Object(jr.e)(r,a);case 5:return i=e.sent,e.next=8,y(Dr.updateMetaData,i,z,v);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m)}),[m]),F=function(){var e=Object(ie.a)(oe.a.mark((function e(){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:P.replace("/register");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=(M=function(){return y(Dr.unregister,"",z,F)},Object(ee.a)({},Dr.unregister,[{index:0,title:"Unregister from network",desc:"Sorry to see the indexer unregister from the Subquery Network, please note that all the data in your coordinator service will be removed, and the staking token will deposit to your current account once transction processed",buttonTitle:"Unregister",onClick:M}])),H=Object(r.useMemo)((function(){return Object(Tt.a)(Object(Tt.a)({},Y),$)}),[m]);return Object(g.jsxs)(ui,{children:[w&&f&&Object(g.jsx)(In,{title:D.title,name:U,buttons:V,account:null!==j&&void 0!==j?j:"",desc:"Balance: ".concat(C," ").concat(N)},j),(f||k)&&Object(g.jsx)(In,{title:q.title,name:q.name,account:E,buttons:G,desc:null===q||void 0===q?void 0:q.desc},j),p&&Object(g.jsx)(ir,{visible:n,title:ma[p],onClose:z,steps:H[p],currentStep:o,type:p})]})},di=n(21),pi=f.a.div(Ga||(Ga=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  border-radius: 18px;\n  margin-bottom: 50px;\n  padding: 60px;\n  min-width: 800px;\n  max-width: 50%;\n  min-height: 450px;\n"]))),bi=f.a.div($a||($a=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),ji=function(e){var t=e.item,n=e.onClick,r=e.loading,a=e.link,i=t.title,c=t.desc,o=t.buttonTitle;return Object(g.jsxs)(pi,{children:[Object(g.jsxs)(bi,{children:[Object(g.jsx)(qt,{alignCenter:!0,size:35,fw:"bold",children:i}),Object(g.jsxs)(qt,{alignCenter:!0,mt:35,children:[c,a]})]}),Object(g.jsx)(zt,{mt:80,type:"primary",title:o,loading:r,onClick:n})]})},fi={mainTitle:"Manage Controller Accounts",title:"Create and manage your controller accounts here",subTitle:"You can Configure the account you wish to set as the controller on the coordinator services",button:"Create an Account"},xi={title:"Manage Controller Accounts",desc:"You can create as many accounts as you want. You can then configure the one you wish to set as the controller on coordinator services.",buttonTitle:"Create an Account"},hi={active:"Actived",activeBtn:"Active",widthdrawBtn:"Withdraw",removeBtn:"Remove"},Oi={configController:{title:"Activate your controller on contract",desc:"Press the button to send the transaction to network and update the new controller account on contract. The transaction processing time may take around 10s, it depends on the network status and gas fee. You will see the processing status on the top of the page once you confim the transaction on the MetaMask.",buttonTitle:"Send Transction"},removeAccount:{title:"Remove this account",desc:"This action will remove the account from your coordinator service. You will not be able to find this account again once you confirm removal. Please make sure there has no assets in this account. Are you sure you want to remove it?",buttonTitle:"Confirm Removal"},withdraw:{title:"Withdraw from controller account",desc:"You are about to withdraw the full balance from this account to your index account. The amount you receive will be the full balance minus the transaction fee. Transaction fee is determined by the network.",buttonTitle:"Confirm Withdrawl"}},mi={widthdraw:{loading:{type:"default",title:"Controller withdrawl",message:function(e){return"Withdraw all the asset for controller: ".concat(e,"  may take 20s")}},success:{type:"success",title:"Controller withdrawl Succeed",message:function(e){return"Withdraw controller: ".concat(e," assets successfully")}},failed:{type:"danger",title:"Controller withdrawl Failed",message:function(e){return"Withdraw controller: ".concat(e," assets failed")}}}},vi=function(e,t){return{index:0,title:e.title,desc:e.desc,buttonTitle:e.buttonTitle,onClick:t}},gi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=mi.widthdraw.loading,n=t.type,r=t.title,a=t.message;return{type:n,title:r,message:a(e),dismiss:wa(3e4,!0)}},yi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=mi.widthdraw.success,n=t.type,r=t.title,a=t.message;return{type:n,title:r,message:a(e),dismiss:wa()}},wi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=mi.widthdraw.failed,n=t.type,r=t.title,a=t.message;return{type:n,title:r,message:a(e),dismiss:wa()}},ki=function(e,t){return e?t:Object(g.jsx)(b.e,{})},Ei=f.a.div(Fa||(Fa=Object(j.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  min-width: 600px;\n  padding: 30px 100px;\n  padding-bottom: 80px;\n  overflow-y: scroll;\n  min-width: 1200px;\n"]))),Si=f.a.div(Ya||(Ya=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),Ci=f.a.div(Ha||(Ha=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-top: ","px;\n"])),(function(e){var t=e.mt;return null!==t&&void 0!==t?t:0})),Ii=f.a.div(_a||(_a=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  align-items: center;\n  justify-content: flex-start;\n  margin-top: 80px;\n"]))),Ti=f.a.div(Ka||(Ka=Object(j.a)(["\n  display: flex;\n  flex: 1;\n  width: 100%;\n  min-width: 600px;\n  min-height: 90px;\n  margin: 10px 0px;\n  padding: 10px 20px;\n  border-color: gray;\n  border-radius: 10px;\n  background-color: white;\n  align-items: center;\n  :hover {\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n    cursor: pointer;\n  }\n"]))),Pi=f.a.div(Ba||(Ba=Object(j.a)(["\n  display: flex;\n  flex: 6;\n  align-items: center;\n"]))),Ni=f.a.div(Wa||(Wa=Object(j.a)(["\n  display: flex;\n  flex: 4;\n  flex-direction: column;\n  margin: 0px 20px;\n"]))),Ai=f.a.div(Xa||(Xa=Object(j.a)(["\n  display: flex;\n  flex: 2;\n"]))),Ri=f.a.div(Qa||(Qa=Object(j.a)(["\n  display: flex;\n  flex: 2;\n  align-items: center;\n"]))),qi=f.a.div(Ja||(Ja=Object(j.a)(["\n  display: flex;\n  flex: 2;\n  justify-content: flex-end;\n  min-width: 300px;\n"]))),Di=function(e){var t=e.id,n=e.name,r=e.controller,a=e.address,i=e.onConfigController,c=e.onRemoveController,o=e.onWithdraw,s=hi,u=s.active,l=s.activeBtn,d=s.widthdrawBtn,p=s.removeBtn,j=a===(null===r||void 0===r?void 0:r.toLocaleLowerCase()),f=$r(a),x=0===Number(f),h={id:t,address:a},O=Yr();return Object(g.jsxs)(Ti,{children:[Object(g.jsxs)(Pi,{onClick:function(){return function(e){var t="https://blockscout.mandala.acala.network/address/".concat(e);window.open(t,"_blank","noopener,noreferrer")}(a)},children:[Object(g.jsx)(Cn,{address:a,size:70}),Object(g.jsxs)(Ni,{children:[Object(g.jsx)(qt,{size:18,fw:"600",children:n}),Object(g.jsx)(qt,{size:15,color:"gray",mt:5,children:a})]}),Object(g.jsx)(Ai,{children:ki(!!f,Object(g.jsx)(qt,{children:"".concat(f," ").concat(O)}))}),Object(g.jsx)(Ri,{children:j&&Object(g.jsx)(b.f,{text:u,state:"success"})})]}),ki(!Object(ae.isUndefined)(r)&&!Object(ae.isUndefined)(f),Object(g.jsxs)(qi,{children:[!j&&Object(g.jsx)(zt,{title:l,onClick:function(){return i(h)}}),!j&&x&&Object(g.jsx)(zt,{ml:10,title:p,onClick:function(){return c(h)}}),!x&&Object(g.jsx)(zt,{ml:10,title:d,onClick:function(){return o(h)}})]}))]})},Mi=function(){var e=fi,t=xi,n=Object(r.useState)(),a=Object(x.a)(n,2),i=a[0],c=a[1],o=Object(r.useState)(),s=Object(x.a)(o,2),u=s[0],l=s[1],d=Object(r.useState)(!1),p=Object(x.a)(d,2),b=p[0],j=p[1],f=it(),h=f.dispatchNotification,O=f.removeNotification,m=Vr(),v=m.controller,y=m.getController,w=za(),k=X().setPageLoading,E=Object(ue.a)(he),S=Object(x.a)(E,1)[0],C=Object(ue.a)(xe),I=Object(x.a)(C,2),T=I[0],P=I[1].loading,N=Object(se.a)(Oe),A=Object(x.a)(N,1)[0],R=Object(se.a)(fe),q=Object(x.a)(R,2),D=q[0],M=q[1].data;Object(r.useEffect)((function(){k(Object(ae.isUndefined)(M)),D()}),[M]);var L,z,U,V=function(e){return e.toLowerCase()===(null===v||void 0===v?void 0:v.toLowerCase())},G=Object(r.useMemo)((function(){if(!M||Object(ae.isEmpty)(null===M||void 0===M?void 0:M.controllers))return[];var e=M.controllers,t=e.find((function(e){var t=e.address;return V(t)}));return t?[t].concat(Object(di.a)(e.filter((function(e){var t=e.address;return!V(t)})))):e}),[M,v]),$=function(){var e=Object(ie.a)(oe.a.mark((function e(){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:return e.next=4,D();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(e){return function(t){l(t),c(e),j(!0)}},Y=function(){return j(!1)},H=(L=Object(ie.a)(oe.a.mark((function e(){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({variables:{id:null===u||void 0===u?void 0:u.id}});case 2:return e.next=4,D();case 4:Y();case 5:case"end":return e.stop()}}),e)}))),Object(ee.a)({},oa.removeAccount,[vi(Oi.removeAccount,L)])),_=(z=Object(ie.a)(oe.a.mark((function e(){var t,n,r;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(),t=null===u||void 0===u?void 0:u.address,n=h(gi(t)),e.next=5,A({variables:{id:null===u||void 0===u?void 0:u.id}});case 5:return r=e.sent,O(n),r.data.withrawController?h(yi(t)):h(wi(t)),e.next=10,D();case 10:case"end":return e.stop()}}),e)}))),Object(ee.a)({},oa.withdraw,[vi(Oi.withdraw,z)])),K=(U=function(){var e;return w(oa.configController,null!==(e=null===u||void 0===u?void 0:u.address)&&void 0!==e?e:"",Y,y)},Object(ee.a)({},oa.configController,[vi(Oi.configController,U)])),B=Object(Tt.a)(Object(Tt.a)(Object(Tt.a)({},K),_),H);return Object(g.jsxs)(Ei,{children:[!Object(ae.isEmpty)(G)&&Object(g.jsxs)(Si,{children:[Object(g.jsxs)(Ci,{children:[Object(g.jsx)(qt,{size:30,fw:"bold",mr:20,children:e.mainTitle}),Object(g.jsx)(qt,{color:"gray",mt:5,children:e.title}),Object(g.jsx)(qt,{color:"gray",children:e.subTitle})]}),Object(g.jsx)(zt,{title:e.button,type:"primary",loading:P,onClick:$})]}),!Object(ae.isEmpty)(G)&&Object(g.jsx)(Ci,{mt:50,children:!!G&&G.map((function(e,t){return Object(g.jsx)(Di,Object(Tt.a)({controller:v,name:"Account ".concat(t+1),onConfigController:F(oa.configController),onRemoveController:F(oa.removeAccount),onWithdraw:F(oa.withdraw)},e),e.id)}))}),Object(ae.isEmpty)(G)&&Object(g.jsx)(Ii,{children:Object(g.jsx)(ji,{item:{title:t.title,desc:t.desc,buttonTitle:t.buttonTitle},onClick:$})}),i&&Object(g.jsx)(ir,{visible:b,onClose:Y,steps:B[i],type:i})]})},Li=n.p+"static/media/discord.46ef476e.svg",zi=n.p+"static/media/github.3c2fbcc1.svg",Ui=n.p+"static/media/linkendin.077ef4b2.svg",Vi=n.p+"static/media/matrix.0fc904a9.svg",Gi=n.p+"static/media/medium.b5c13839.svg",$i=n.p+"static/media/telegram.224cb085.svg",Fi=n.p+"static/media/twitter.ab5c408e.svg",Yi=function(e,t){return{src:e,url:t}},Hi=[Yi($i,"https://t.me/subquerynetwork"),Yi(Li,"https://www.linkedin.com/company/subquery--"),Yi(zi,"https://github.com/subquery/subql"),Yi(Ui,"https://www.linkedin.com/company/subquery"),Yi(Gi,"https://subquery.medium.com/"),Yi(Vi,"https://matrix.to/#/#subquery:matrix.org"),Yi(Fi,"https://twitter.com/subquerynetwork")],_i=f.a.div(Za||(Za=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  background-color: var(--sq-primary-blue);\n  min-height: 150px;\n  width: 100%;\n"]))),Ki=f.a.div(ei||(ei=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  border-bottom: solid 1px white;\n  padding-left: 80px;\n  padding-right: 100px;\n  align-items: center;\n  min-height: 120px;\n  width: 100%;\n"]))),Bi=f.a.div(ti||(ti=Object(j.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n  min-width: 550px;\n  height: 100%;\n"]))),Wi=function(){var e=Object(l.h)();return Ue()||["/project/","/account"].includes(e.pathname)?null:Object(g.jsxs)(_i,{children:[Object(g.jsxs)(Ki,{children:[Object(g.jsx)(qt,{mw:160,color:"white",fw:"700",size:30,children:"Follow Us"}),Object(g.jsx)(Bi,{children:Hi.map((function(e){var t=e.src,n=e.url;return Object(g.jsx)(It,{size:50,src:t,url:n},n)}))})]}),Object(g.jsx)(qt,{ml:80,mt:5,color:"white",fw:"400",size:10,children:"SubQuery \xa9 2021"})]})},Xi=n(126),Qi=n.n(Xi),Ji=n.p+"static/media/subquery.8b4df4b6.svg",Zi=f.a.div(ni||(ni=Object(j.a)(["\n  display: flex;\n  width: 100vw;\n  align-items: center;\n  justify-content: space-between;\n  min-height: 80px;\n  padding: 0px 40px;\n  border-bottom: 1px solid lightgray;\n"]))),ec=f.a.div(ri||(ri=Object(j.a)(["\n  display: flex;\n  align-items: center;\n"]))),tc=f.a.div(ai||(ai=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0px 20px;\n  min-width: 260px;\n  height: 55px;\n"])));!function(e){e.account="Account",e.network="Network",e.projects="Projects",e.payg="PAYG"}(ci||(ci={}));var nc,rc,ac,ic,cc,oc=Object(f.a)(u.b)(ii||(ii=Object(j.a)(["\n  margin-left: 50px;\n  margin-top: 20px;\n  color: #1a202c;\n  text-decoration: none;\n  font-family: Futura;\n  font-size: 16px;\n  :hover {\n    text-decoration: underline;\n  }\n"]))),sc=function(){var e=Le(),t=e.account,n=e.deactivate,a=Object(l.h)().pathname,i=Ue(),c=Ur(),o=Vr(),s=Gr(t,a).tokenBalance,u={fontWeight:500,color:"#4388dd"},d={border:"unset !important",padding:15,width:100},p=function(e,t){return{key:e,label:t}},j=function(e){"disconnect"===e&&n()},f=Object(r.useMemo)((function(){return"/"===a}),[a]),x=Object(r.useMemo)((function(){return[p("balance","Token: ".concat(s," SQT")),p("disconnect","Disconnect")]}),[s]),h=Object(r.useCallback)((function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)(oc,{to:"/account",activeStyle:u,children:ci.account}),Object(g.jsx)(oc,{to:"/network",activeStyle:u,children:ci.network}),o&&Object(g.jsx)(oc,{to:"/projects",activeStyle:u,children:ci.projects}),o&&Object(g.jsx)(oc,{to:"/payg",activeStyle:u,children:ci.payg})]})}),[o]);return Object(g.jsxs)(Zi,{children:[Object(g.jsxs)(ec,{children:[Object(g.jsx)("img",{src:Ji,alt:"subquery"}),!f&&c&&h()]}),i&&Object(g.jsxs)(tc,{children:[Object(g.jsx)(Rt,{width:30,color:"#f6f9fc"}),t&&(f?Object(g.jsx)(b.a,{address:t,size:"large"}):Object(g.jsx)(b.c,{items:x,onSelected:j,dropdownClass:Object(Tt.a)(Object(Tt.a)({},Qi.a.secondary),d),children:Object(g.jsx)(b.a,{address:t,size:"large"})}))]})]})},uc=f.a.div(nc||(nc=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  min-height: 400px;\n  align-items: center;\n  justify-content: center;\n  background-color: #f6f9fc;\n"]))),lc=function(){var e=Le().account,t=Ur(),n=X().setPageLoading,a=qe(),i=a.loading,c=a.load;return Object(r.useEffect)((function(){c()}),[c]),Object(r.useEffect)((function(){n(i||Object(ae.isUndefined)(t))}),[i,t]),Object(g.jsx)(uc,{children:Object(g.jsxs)("div",{children:[e&&!t&&Object(g.jsx)(l.a,{to:"/register"}),e&&t&&Object(g.jsx)(l.a,{to:"/account"})]})})},dc=f.a.div(rc||(rc=Object(j.a)(["\n  display: flex;\n  flex-direction: ",";\n  justify-content: ",";\n  align-items: ",";\n"])),(function(e){return e.horizontal?"row":"column"}),(function(e){return e.horizontal?"center":"flex-start"}),(function(e){return e.horizontal?"center":"flex-start"})),pc=function(e){var t=e.versionType,n=e.horizontal,r=void 0!==n&&n,a=e.value,i=void 0===a?"":a,c=e.prefix,o=void 0===c?"":c,s=r?"gray":"black",u=o?"#4388dd":"gray";return Object(g.jsxs)(dc,{horizontal:r,children:[Object(g.jsx)(qt,{color:s,size:r?13:15,fw:"500",children:t}),r?Object(g.jsx)(qt,{ml:15,mr:15,color:u,fw:"500",size:15,children:"".concat(o).concat(i)}):Object(g.jsx)(qt,{mt:5,color:u,fw:"500",size:13,children:"".concat(o).concat(i)})]})},bc=n(1098),jc=n(1087),fc=n(1089),xc=function(e){var t=e.container,n=e.height,a=void 0===n?650:n,i=Object(se.a)(Ie,{fetchPolicy:"network-only"}),c=Object(x.a)(i,2),o=c[0],s=c[1],u=s.loading,l=s.data,d=s.error;Object(r.useEffect)((function(){o({variables:{container:t}})}),[]);var p=Object(r.useMemo)((function(){return u||d?"":null===l||void 0===l?void 0:l.getLog.log}),[l,u]);return Object(g.jsxs)(hc,{height:a,children:[Object(g.jsx)(Oc,{size:"small",type:"secondary",label:"Refresh",onClick:function(){return o({variables:{container:t}})}}),!!p&&Object(g.jsx)(fc.a,{hasLineNumbers:!0,height:a-100,data:p,isTextWrapped:!0,theme:"dark"}),u&&Object(g.jsx)(b.e,{})]})},hc=f.a.div(ac||(ac=Object(j.a)(["\n  height: ","px;\n  padding: 30px;\n  margin-top: 10px;\n  background-color: var(--sq-gray900);\n  align-items: center;\n"])),(function(e){return e.height})),Oc=Object(f.a)(b.b)(ic||(ic=Object(j.a)(["\n  margin-bottom: 20px;\n  height: 30px;\n  width: 100px;\n  margin-right: 20px;\n"])));!function(e){e[e.ServiceLog=0]="ServiceLog"}(cc||(cc={}));var mc,vc,gc,yc,wc,kc,Ec,Sc,Cc,Ic,Tc,Pc,Nc,Ac,Rc,qc,Dc,Mc=function(){var e=Object(r.useState)(cc.ServiceLog),t=Object(x.a)(e,2),n=t[0],a=t[1],i=Object(r.useCallback)((function(){return Object(g.jsx)(xc,{height:500,container:"coordinator_service"})}),[n]);return Object(g.jsxs)("div",{style:{marginTop:30},children:[Object(g.jsx)(jc.a,{value:n,onChange:function(e,t){a(t)},textColor:"primary",indicatorColor:"primary",children:Object(g.jsx)(bc.a,{value:cc.ServiceLog,label:"Service Log"})}),i()]})},Lc=f.a.div(mc||(mc=Object(j.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  min-width: 1270px;\n  padding: 30px 50px;\n  overflow: auto;\n"]))),zc=f.a.div(vc||(vc=Object(j.a)(["\n  display: flex;\n  align-items: center;\n  min-width: 685px;\n  margin-bottom: 30px;\n"]))),Uc=f.a.div(gc||(gc=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  margin-left: 40px;\n"]))),Vc=f.a.div(yc||(yc=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin-top: 25px;\n  height: 50px;\n  width: 500px;\n"]))),Gc=function(){var e=Le().account,t=Fr().metadata,n=X().setPageLoading,a=function(){var e=Le().account,t=Ze(),n=Object(r.useState)(),a=Object(x.a)(n,2),i=a[0],c=a[1],o=Object(r.useCallback)(Object(ie.a)(oe.a.mark((function n(){var r,a,i,o,s;return oe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t&&e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.rewardsDistributor.getRewardInfo(e);case 4:return r=n.sent.lastClaimEra,n.next=7,Promise.all([t.eraManager.eraNumber(),t.rewardsStaking.getLastSettledEra(e)]);case 7:a=n.sent,i=Object(x.a)(a,2),o=i[0],s=i[1],c({currentEra:o.toString(),lastClaimedEra:r.toString(),lastSettledEra:s.toString()});case 12:case"end":return n.stop()}}),n)}))),[t,e]);return Object(r.useEffect)((function(){o()}),[o]),i}();Object(r.useEffect)((function(){n(Object(ae.isUndefined)(a))}),[a]);var i=Object(r.useMemo)((function(){return Object(g.jsxs)(Vc,{children:[Object(g.jsx)(pc,{versionType:"CURRENT ERA",prefix:"#",value:null===a||void 0===a?void 0:a.currentEra}),Object(g.jsx)(Rt,{height:50}),Object(g.jsx)(pc,{versionType:"LAST CLAIM ERA",prefix:"#",value:null===a||void 0===a?void 0:a.lastClaimedEra}),Object(g.jsx)(Rt,{height:50}),Object(g.jsx)(pc,{versionType:"LAST SETTLE ERA",prefix:"#",value:null===a||void 0===a?void 0:a.lastSettledEra})]})}),[a]);return Object(g.jsxs)(Lc,{children:[Object(g.jsxs)(zc,{children:[Object(g.jsx)(Cn,{address:null!==e&&void 0!==e?e:"",size:100}),Object(g.jsxs)(Uc,{children:[Object(g.jsx)(qt,{fw:"600",size:30,children:null===t||void 0===t?void 0:t.name}),Object(g.jsx)(qt,{fw:"400",size:15,children:e}),i]})]}),Object(g.jsx)(Mc,{})]})},$c=f.a.div(wc||(wc=Object(j.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: ",";\n  border-radius: 5px;\n  padding: 5px 10px;\n  min-width: 80px;\n"])),(function(e){var t;return null!==(t=e.color)&&void 0!==t?t:"lightgreen"})),Fc=f.a.div(kc||(kc=Object(j.a)(["\n  font-size: 13px;\n  color: black;\n"]))),Yc=function(e){var t=e.text,n=e.color;return Object(g.jsx)($c,{color:n,children:Object(g.jsx)(Fc,{color:n,children:t})})},Hc=f.a.div(Ec||(Ec=Object(j.a)(["\n  display: flex;\n  flex: 1;\n  justify-content: center;\n"]))),_c=f.a.div(Sc||(Sc=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  min-width: 600px;\n  padding: 10px 100px;\n  padding-bottom: 150px;\n  overflow-y: scroll;\n"]))),Kc=f.a.div(Cc||(Cc=Object(j.a)(["\n  display: flex;\n  width: 100%;\n  min-width: 600px;\n  align-items: center;\n  justify-content: space-between;\n"]))),Bc=f.a.div(Ic||(Ic=Object(j.a)(["\n  display: flex;\n  flex: ",";\n  padding-left: ","px;\n  min-width: ","px;\n  margin-right: 15px;\n  align-items: center;\n"])),(function(e){var t=e.flex;return null!==t&&void 0!==t?t:1}),(function(e){var t=e.pl;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mw;return null!==t&&void 0!==t?t:100})),Wc=f.a.div(Tc||(Tc=Object(j.a)(["\n  display: flex;\n  flex: ",";\n  background-color: ",";\n  padding-left: ","px;\n  min-width: ","px;\n  margin-right: 15px;\n  align-items: center;\n"])),(function(e){var t=e.flex;return null!==t&&void 0!==t?t:1}),(function(e){var t=e.color;return null!==t&&void 0!==t?t:"white"}),(function(e){var t=e.pl;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mw;return null!==t&&void 0!==t?t:100})),Xc=(Object(f.a)(b.d)(Pc||(Pc=Object(j.a)(["\n  max-width: 60%;\n  min-width: 300;\n"]))),f.a.div(Nc||(Nc=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 80%;\n  margin-left: 20px;\n"]))),f.a.div(Ac||(Ac=Object(j.a)(["\n  display: flex;\n  width: 100%;\n  min-width: 600px;\n  min-height: 90px;\n  margin: 10px 0px;\n  padding: 10px 10px;\n  background-color: white;\n  :hover {\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n    cursor: pointer;\n  }\n"]))));!function(e){e[e.FINALIZED=0]="FINALIZED",e[e.OPEN=1]="OPEN",e[e.CHALLENGE=2]="CHALLENGE"}(Dc||(Dc={}));var Qc,Jc,Zc,eo,to,no,ro,ao,io=(Rc={},Object(ee.a)(Rc,Dc.FINALIZED,"rgba(70, 219, 103, 0.4)"),Object(ee.a)(Rc,Dc.OPEN,"rgba(67, 136, 221, 0.24)"),Object(ee.a)(Rc,Dc.CHALLENGE,"rgba(214, 48, 48, 0.3)"),Rc),co=(qc={},Object(ee.a)(qc,Dc.FINALIZED,"FINALIZED"),Object(ee.a)(qc,Dc.OPEN,"OPEN"),Object(ee.a)(qc,Dc.CHALLENGE,"CHALLENGE"),qc);!function(e){e.Checkpoint="Checkpoint",e.Respond="Respond",e.Finalize="Finalize"}(Qc||(Qc={})),function(e){e.query="onfinality/subql-query",e.substrateNode="onfinality/subql-node",e.cosmos="onfinality/subql-node-cosmos",e.avalanche="onfinality/subql-node-avalanche"}(Jc||(Jc={})),function(e){e[e.NOTINDEXING=0]="NOTINDEXING",e[e.INDEXING=1]="INDEXING",e[e.READY=2]="READY"}(Zc||(Zc={})),function(e){e.NotIndexing="NOT INDEXING",e.Started="STARTED",e.Indexing="INDEXING",e.Ready="READY",e.Terminated="TERMINATED"}(eo||(eo={})),function(e){e.Open="OPEN",e.Close="CLOSE"}(to||(to={})),function(e){e.unregister="unregister",e.updateMetaData="updateMetadata"}(no||(no={})),function(e){e.addProject="addProject"}(ro||(ro={})),function(e){e.StartIndexing="StartIndexing",e.AnnounceIndexing="AnnounceIndexing",e.RestartProject="RestartProject",e.AnnounceReady="AnnounceReady",e.StopProject="StopProject",e.AnnounceNotIndexing="AnnounceNotIndexing",e.StopIndexing="StopIndexing",e.RemoveProject="Remove Project",e.PaygOpen="Open PAYG",e.PaygChangePrice="Change Price",e.PaygClose="Close PAYG"}(ao||(ao={}));var oo,so,uo=function(){var e=Ur(),t=X().setPageLoading,n=Object(se.a)(Ee,{fetchPolicy:"network-only"}),a=Object(x.a)(n,2),i=a[0],c=a[1].data,o=Object(ue.a)(Se),s=Object(x.a)(o,2),u=s[0],l=(s[1].loading,Object(ue.a)(Ce)),d=Object(x.a)(l,2),p=(d[0],d[1].loading,Object(r.useState)(!1)),b=Object(x.a)(p,2),j=b[0],f=b[1],h=Object(r.useState)({id:"",status:Dc.FINALIZED,deploymentId:"",consumer:"",total:"",spent:"",onchain:"",price:"",expirationAt:0,challengeAt:0}),O=Object(x.a)(h,2),m=O[0],v=O[1];Object(r.useEffect)((function(){t(Object(ae.isUndefined)(c))}),[c]),Object(r.useEffect)((function(){t(!0),i()}),[]);var y=function(e){return"".concat(e.substring(0,8),"...",e.substring(e.length-6,e.length))},w=Object(ee.a)({},Qc.Checkpoint,[{index:0,title:m.id,desc:m.deploymentId,buttonTitle:"Checkpoint",onClick:function(){var e=Object(ie.a)(oe.a.mark((function e(){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({variables:{id:m.id}});case 2:f(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]);return Object(g.jsxs)(Hc,{children:[e&&(Object(ae.isUndefined)(c)?null:Object(g.jsxs)(_c,{children:[Object(g.jsx)(Kc,{children:Object(g.jsx)(qt,{size:45,children:"State Channels"})}),Object(g.jsxs)(Kc,{children:[Object(g.jsx)(Bc,{pl:15,flex:4,children:Object(g.jsx)(qt,{children:"ID"})}),Object(g.jsx)(Bc,{flex:6,children:Object(g.jsx)(qt,{children:"Deployment"})}),Object(g.jsx)(Bc,{flex:2,children:Object(g.jsx)(qt,{children:"Total"})}),Object(g.jsx)(Bc,{flex:2,children:Object(g.jsx)(qt,{children:"Spent"})}),Object(g.jsx)(Bc,{flex:2,children:Object(g.jsx)(qt,{children:"Price"})}),Object(g.jsx)(Bc,{flex:2,children:Object(g.jsx)(qt,{children:"Status"})})]}),null===c||void 0===c?void 0:c.channels.map((function(e){return Object(g.jsxs)(Xc,{onClick:function(){return v(e),void f(!0)},children:[Object(g.jsx)(Wc,{pl:15,flex:4,children:Object(g.jsx)(qt,{fw:"600",size:18,children:y(e.id)})}),Object(g.jsx)(Wc,{flex:6,children:Object(g.jsx)(qt,{children:y(e.deploymentId)})}),Object(g.jsx)(Wc,{flex:2,children:Object(g.jsx)(qt,{children:e.total})}),Object(g.jsx)(Wc,{flex:2,children:Object(g.jsx)(qt,{children:e.spent})}),Object(g.jsx)(Wc,{flex:2,children:Object(g.jsx)(qt,{children:e.price})}),Object(g.jsx)(Wc,{flex:2,children:Object(g.jsx)(Yc,{text:co[e.status],color:io[e.status]})})]})}))]})),Object(g.jsx)(ir,{visible:j,title:"Channel Detail",onClose:function(){f(!1)},steps:w.Checkpoint})]})},lo=function(e){var t=e.visible,n=void 0!==t&&t,a=e.title,i=e.description,c=Object(r.useState)(n),o=Object(x.a)(c,2),s=o[0],u=o[1];return Object(g.jsx)(Dn.a,{isOpen:s,style:po,closeTimeoutMS:200,ariaHideApp:!1,children:Object(g.jsxs)(bo,{children:[Object(g.jsxs)(jo,{children:[Object(g.jsx)(qt,{fw:"bold",size:35,children:a}),Object(g.jsx)(qt,{alignCenter:!0,fw:"400",mt:30,size:18,children:i})]}),Object(g.jsx)(zt,{mt:100,width:300,title:"Confirm",onClick:function(){return u(!1)}})]})})},po={content:{backgroundColor:"white",borderRadius:15,top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",maxWidth:900,minWidth:700,padding:0},overlay:{zIndex:50,backgroundColor:"rgba(0, 0, 0, 0.65)"}},bo=f.a.div(oo||(oo=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 50px 30px;\n"]))),jo=f.a.div(so||(so=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),fo=n(497),xo={lastProcessedHeight:0,lastProcessedTimestamp:0,targetHeight:0,chain:"",specName:"",genesisHash:"",indexerHealthy:void 0,indexerNodeVersion:"",queryNodeVersion:"",indexerStatus:"TERMINATED",queryStatus:"TERMINATED"},ho={id:"",networkEndpoint:"",networkDictionary:"",nodeVersion:"",queryVersion:"",poiEnabled:!1,forceEnabled:!1,status:0,paygPrice:"",paygExpiration:3600,paygThreshold:1e3,paygOverflow:5},Oo=Object(Tt.a)({name:"",owner:"",image:"",description:"",websiteUrl:"",codeUrl:"",version:"",currentDeployment:"",currentVersion:"",versionDescription:"",createdTimestamp:"",updatedTimestamp:"",metadata:void 0},ho),mo=pn(window.env.REGISTRY_PROJECT),vo=pn(ln),go=function(){var e=Object(ie.a)(oe.a.mark((function e(t){var n;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vo.query({query:Te,variables:{id:t},fetchPolicy:"network-only"});case 3:return n=e.sent,e.abrupt("return",n.data.queryMetadata);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",xo);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),yo=function(){var e=Object(ie.a)(oe.a.mark((function e(t){var n,r,a,i,c,o;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mo.query({query:Ne,variables:{deploymentId:t}});case 2:if(r=e.sent,a=null===(n=r.data.deployments.nodes[0])||void 0===n?void 0:n.project){e.next=7;break}return console.error("Unable to get metadata for project"),e.abrupt("return",Oo);case 7:return e.next=9,Object(jr.c)(a.metadata);case 9:return i=e.sent,e.next=12,go(t);case 12:return c=e.sent,o=Object(Tt.a)(Object(Tt.a)(Object(Tt.a)({},a),i),{},{metadata:c,id:t}),e.abrupt("return",o);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wo=function(){var e=Object(ie.a)(oe.a.mark((function e(t){var n,r;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mo.query({query:Pe,variables:{indexer:t}});case 2:return n=e.sent,r=n.data.deploymentIndexers.nodes,e.abrupt("return",r.filter((function(e){return"TERMINATED"!==e.status})).map((function(e){return Object(Tt.a)(Object(Tt.a)({},ho),{},{id:e.deploymentId})})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ko(e,t){if(Object(ae.isEmpty)(e))return t;var n=t.filter((function(t){return!e.find((function(e){return e.id===t.id}))}));return[].concat(Object(di.a)(e),Object(di.a)(n))}var Eo=function(){var e=Object(ie.a)(oe.a.mark((function e(t){var n,r;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jr.c)(t,jr.a);case 2:return n=e.sent,r=fo.a.load(n),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function So(e){switch(e){case"cosmos":return Nr.cosmos;case"avalanche":return Nr.avalanche;default:return Nr.substrateNode}}var Co={substrate:">=1.1.1",cosmos:">=0.1.0",avalanche:">=0.1.1"},Io=n(498),To=n.n(Io);function Po(e){return!Object(ae.isUndefined)(e)&&!e}function No(e){return Ao.apply(this,arguments)}function Ao(){return(Ao=Object(ie.a)(oe.a.mark((function e(t){var n,r,a,i,c,o,s;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new URL(t),r=n.host,a=n.protocol,"QmTQTnBTcvv3Eb3M6neDiwuubWVDAoqyAgKmXtTtJKAHoH",i="".concat(a,"//").concat(r,"/metadata/").concat("QmTQTnBTcvv3Eb3M6neDiwuubWVDAoqyAgKmXtTtJKAHoH"),e.next=6,To.a.get(i);case 6:return c=e.sent,e.abrupt("return",!!c);case 10:return e.prev=10,e.t0=e.catch(0),s=e.t0,e.abrupt("return",400===(null===(o=s.response)||void 0===o?void 0:o.status));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var Ro,qo,Do,Mo,Lo;function zo(e,t){return 0===e?0:t>=e?100:Math.round(100*t*100/e)/100}function Uo(e){return"HEALTHY"===e||"STARTING"===e?"success":"error"}function Vo(e){switch(e){case Ar.NOTINDEXING:return"error";case Ar.INDEXING:return"info";case Ar.READY:return"success";default:return"error"}}function Go(e){return!0===e||"true"===e}!function(e){e.healthy="HEALTHY",e.unhealthy="UNHEALTHY",e.terminated="TERMINATED"}(Ro||(Ro={}));var $o,Fo,Yo,Ho,_o,Ko,Bo,Wo,Xo,Qo,Jo,Zo,es,ts,ns,rs,as,is,cs,os,ss,us=function(e){var t,n,r=e.id,a=e.projectStatus,i=e.project;return Object(g.jsx)(ls,{children:Object(g.jsxs)(ds,{children:[Object(g.jsx)(Cn,{address:Object(jr.d)(r),size:100}),Object(g.jsxs)(ps,{children:[Object(g.jsx)(qt,{fw:"600",size:30,children:i.name}),Object(g.jsx)(qt,{fw:"400",size:15,children:i.owner}),Object(g.jsxs)(bs,{children:[Object(g.jsx)(pc,{versionType:"INDEXED NETWORK",value:null===(t=i.metadata)||void 0===t?void 0:t.chain}),Object(g.jsx)(Rt,{height:30}),Object(g.jsx)(pc,{versionType:"VERSION",value:"V".concat(null!==(n=i.version)&&void 0!==n?n:"1.0.0")}),Object(g.jsx)(Rt,{height:30}),Object(g.jsx)(pc,{versionType:"PROJECT STATUS",value:a})]})]})]})})},ls=f.a.div(qo||(qo=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  min-height: 200px;\n  padding-right: 32px;\n"]))),ds=f.a.div(Do||(Do=Object(j.a)(["\n  display: flex;\n  flex: 1;\n  align-items: center;\n  min-width: 685px;\n"]))),ps=f.a.div(Mo||(Mo=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  margin-left: 40px;\n"]))),bs=f.a.div(Lo||(Lo=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 25px;\n  height: 50px;\n  width: 450px;\n"]))),js=f.a.div($o||($o=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  min-width: 1270px;\n  padding: 0px 50px;\n  padding-bottom: 50px;\n  overflow: auto;\n"]))),fs=f.a.div(Fo||(Fo=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  -ms-overflow-style: none; /* for Internet Explorer, Edge */\n  scrollbar-width: none; /* for Firefox */\n  overflow-y: scroll;\n  ::-webkit-scrollbar {\n    display: none; /* for Chrome, Safari, and Opera */\n  }\n"]))),xs=f.a.div(Yo||(Yo=Object(j.a)(["\n  display: flex;\n  background-color: white;\n  justify-content: space-between;\n  min-width: 1355px;\n  border-radius: 8px;\n  margin-top: 20px;\n  padding: 32px;\n"]))),hs=f.a.div(Ho||(Ho=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]))),Os=f.a.div(_o||(_o=Object(j.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  margin-right: 50px;\n"]))),ms=f.a.div(Ko||(Ko=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  min-width: 200px;\n  margin-right: 30px;\n"]))),vs=f.a.div(Bo||(Bo=Object(j.a)(["\n  display: flex;\n  align-items: center;\n"]))),gs=function(e){var t=e.actionItems,n=e.status,r=e.price,a=e.expiration,i=e.threshold,c=e.overflow;return Object(g.jsxs)(xs,{children:[Object(g.jsx)(Os,{children:Object(g.jsxs)(ms,{children:[Object(g.jsxs)(vs,{children:[Object(g.jsxs)(qt,{mr:20,fw:"500",children:["PAYG price: ",r,"SQT"]}),n===qr.Open?Object(g.jsx)(b.f,{text:"Open",state:"success"}):Object(g.jsx)(b.f,{text:"Close",state:"error"})]}),n===qr.Open?Object(g.jsxs)(qt,{size:15,color:"gray",mt:10,children:["Minimum expiration time: ",a," seconds"]}):Object(g.jsx)(qt,{size:15,color:"gray",mt:10,children:" "}),n===qr.Open?Object(g.jsxs)(qt,{size:15,color:"gray",mt:10,children:["Automatic checkpoint to chain: ",i," times"]}):Object(g.jsx)(qt,{size:15,color:"gray",mt:10,children:" "}),n===qr.Open?Object(g.jsxs)(qt,{size:15,color:"gray",children:["Maximum allowed conflict: ",c," times"]}):Object(g.jsx)(qt,{size:15,color:"gray",children:" "})]})}),Object(g.jsx)(hs,{children:t.map((function(e){var t=e.title,n=e.action;return Object(g.jsx)(zt,{mt:10,width:265,title:t,onClick:n},t)}))})]})},ys=f.a.div(Wo||(Wo=Object(j.a)(["\n  display: flex;\n  background-color: white;\n  border-radius: 8px;\n"]))),ws=f.a.div(Xo||(Xo=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  min-width: 200px;\n  margin-right: 30px;\n"]))),ks=f.a.div(Qo||(Qo=Object(j.a)(["\n  display: flex;\n  align-items: center;\n"]))),Es=function(e){var t=e.title,n=e.subTitle,r=e.status;return Object(g.jsxs)(ws,{children:[Object(g.jsxs)(ks,{children:[Object(g.jsx)(qt,{mr:20,fw:"500",children:t}),!!r&&Object(g.jsx)(b.f,{text:r,state:Uo(r)})]}),Object(g.jsx)(qt,{size:15,color:"gray",mt:10,children:n})]})},Ss=function(e){var t=e.id,n=e.actionItems,r=e.data;if(!r)return null;var a=function(e,t){return"onfinality/subql-".concat(e,":").concat(t)};return Object(g.jsxs)(xs,{children:[Object(g.jsxs)(ys,{children:[Object(g.jsx)(Es,{title:"Indexer Service",subTitle:"Image Version: ".concat(a("indexer",r.indexerNodeVersion)),status:r.indexerStatus}),Object(g.jsx)(Es,{title:"Query Service",subTitle:"Image Version: ".concat(a("query",r.queryNodeVersion)),status:r.queryStatus}),Object(g.jsx)(Es,{title:"Proxy Service",subTitle:"Url: ".concat(dn,"/query/").concat(t),status:r.queryStatus})]}),Object(g.jsx)(hs,{children:n.map((function(e){var t=e.title,n=e.action;return Object(g.jsx)(zt,{mt:10,width:265,title:t,onClick:n},t)}))})]})},Cs=(Jo={},Object(ee.a)(Jo,Ar.NOTINDEXING,"rgba(214, 48, 48, 0.3)"),Object(ee.a)(Jo,Ar.INDEXING,"rgba(67, 136, 221, 0.24)"),Object(ee.a)(Jo,Ar.READY,"rgba(70, 219, 103, 0.4)"),Jo),Is=(Zo={},Object(ee.a)(Zo,Ar.NOTINDEXING,"NOT INDEXING"),Object(ee.a)(Zo,Ar.INDEXING,"INDEXING"),Object(ee.a)(Zo,Ar.READY,"READY"),Zo),Ts=f.a.div(es||(es=Object(j.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  margin-right: 50px;\n"]))),Ps=f.a.div(ts||(ts=Object(j.a)(["\n  display: flex;\n  min-width: 230px;\n  margin: 15px 0px;\n"]))),Ns=f.a.div(ns||(ns=Object(j.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 15px;\n"]))),As=function(e){var t=e.percent,n=e.actionItems,r=e.status,a=e.metadata;return Object(g.jsxs)(xs,{children:[Object(g.jsxs)(Ts,{children:[Object(g.jsxs)(Ns,{children:[Object(g.jsx)(qt,{size:15,fw:"500",mr:10,children:"Indexing Status"}),Object(ae.isUndefined)(r)?Object(g.jsx)(b.e,{}):Object(g.jsx)(b.f,{text:Is[r],state:Vo(r)})]}),!(null===a||void 0===a||!a.targetHeight)&&Object(g.jsxs)(Ps,{children:[Object(g.jsx)(pc,{horizontal:!0,versionType:"Latest Block",prefix:"#",value:a.targetHeight}),Object(g.jsx)(pc,{horizontal:!0,versionType:"Indexing Block",prefix:"#",value:a.lastProcessedHeight})]}),Object(g.jsx)(b.d,{progress:t/100})]}),Object(g.jsx)(hs,{children:n.map((function(e){var t=e.title,n=e.action;return Object(g.jsx)(zt,{mt:10,width:265,title:t,onClick:n},t)}))})]})},Rs=function(e){var t=e.title,n=e.desc,r=e.ml,a=e.mt;return Object(g.jsxs)(Vs,{ml:r,mt:a,children:[Object(g.jsx)(qt,{size:18,children:t}),Object(g.jsx)(qt,{mt:15,size:16,color:"gray",children:n})]})},qs=function(e){return new Date(e).toLocaleDateString()},Ds=function(e){var t=e.project,n=t.description,r=t.websiteUrl,a=t.codeUrl,i=t.currentDeployment,c=t.createdTimestamp,o=t.updatedTimestamp;return Object(g.jsxs)(Ms,{children:[Object(g.jsxs)(Ls,{children:[Object(g.jsx)(Rs,{title:"Description",desc:n}),Object(g.jsxs)(zs,{children:[Object(g.jsx)(Rs,{title:"Created",desc:qs(c)}),Object(g.jsx)(Rs,{ml:150,title:"Last Updated",desc:qs(o)})]})]}),Object(g.jsxs)(Us,{children:[Object(g.jsx)(Rs,{title:"Deployment ID",desc:i}),Object(g.jsx)(Rs,{mt:30,title:"Website URL",desc:r}),Object(g.jsx)(Rs,{mt:30,title:"Source Code URL",desc:a})]})]})},Ms=f.a.div(rs||(rs=Object(j.a)(["\n  display: flex;\n  min-height: 350px;\n  margin-top: 20px;\n"]))),Ls=f.a.div(as||(as=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  min-width: 500px;\n  width: 45%;\n"]))),zs=f.a.div(is||(is=Object(j.a)(["\n  display: flex;\n  align-items: center;\n  margin-top: 50px;\n"]))),Us=f.a.div(cs||(cs=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  margin-left: 80px;\n"]))),Vs=f.a.div(os||(os=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-left: ","px;\n  margin-top: ","px;\n"])),(function(e){var t=e.ml;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mt;return null!==t&&void 0!==t?t:0}));!function(e){e[e.ProjectDetails=0]="ProjectDetails",e[e.NodeLog=1]="NodeLog"}(ss||(ss={}));var Gs,$s,Fs,Ys,Hs,_s,Ks,Bs,Ws,Xs,Qs=function(e){var t=e.id,n=e.project,a=Object(r.useState)(ss.ProjectDetails),i=Object(x.a)(a,2),c=i[0],o=i[1],s=Object(r.useCallback)((function(){return c===ss.NodeLog?Object(g.jsx)(xc,{container:"node_".concat((e=t,e.substring(0,15).toLowerCase())),height:650}):Object(g.jsx)(Ds,{id:t,project:n});var e}),[c]);return Object(g.jsxs)("div",{style:{marginTop:30},children:[Object(g.jsxs)(jc.a,{value:c,onChange:function(e,t){o(t)},textColor:"primary",indicatorColor:"primary",children:[Object(g.jsx)(bc.a,{value:ss.ProjectDetails,label:"Project Details"}),Object(g.jsx)(bc.a,{value:ss.NodeLog,label:"Service Log"})]}),s()]})},Js=function(){var e=Object(l.i)().id,t=Object(l.h)().state.data,n=function(e){var t,n=Object(r.useState)(),a=Object(x.a)(n,2),i=a[0],c=a[1],o=Le().account,s=it(),u=Ze();return Object(r.useEffect)((function(){u&&o&&e&&u.queryRegistry.deploymentStatusByIndexer(Object(jr.d)(e),o).then((function(e){var t=e.status;c(t)})).catch((function(e){return console.error(e)}))}),[u,o,e,null===(t=s.notification)||void 0===t?void 0:t.type]),i}(e),a=function(e){var t=Object(r.useState)(),n=Object(x.a)(t,2),a=n[0],i=n[1],c=it().notification,o=Object(r.useCallback)(Object(ie.a)(oe.a.mark((function t(){var n;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,yo(e);case 3:n=t.sent,i(n),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),i(void 0),console.error("Unable to get project details",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])}))),[e]);return Object(r.useEffect)((function(){o()}),[o,null===c||void 0===c?void 0:c.type]),a}(e),i=X().setPageLoading,c=Object(l.g)();!function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Ur(),n=Vr().controller,a=Object(l.g)(),i=X(),c=i.pageLoading,o=i.setPageLoading;Object(r.useEffect)((function(){o(Object(ae.isUndefined)(t)||Object(ae.isUndefined)(n)),!c&&e&&(Po(t)?a.replace("/"):Po(n)&&a.replace("/account"))}),[t,n])}(!t);var o=Ua(e),s=function(e){var t=it().notification,n=Object(r.useState)(),a=Object(x.a)(n,2),i=a[0],c=a[1],o=Object(se.a)(we,{fetchPolicy:"network-only"}),s=Object(x.a)(o,2),u=s[0],l=s[1].data,d=function(){return u({variables:{id:e}})};return Object(r.useEffect)((function(){l?c(l.project):d()}),[e,l,null===t||void 0===t?void 0:t.type]),{projectService:i,getProjectService:d}}(e),u=s.projectService,d=s.getProjectService,p=null!==u&&void 0!==u&&u.paygPrice?qr.Open:qr.Close,b=it().dispatchNotification,j=Object(ue.a)(be),f=Object(x.a)(j,2),h=f[0],O=f[1].loading,m=Object(ue.a)(je),v=Object(x.a)(m,2),y=v[0],w=v[1].loading,k=Object(ue.a)(ge),E=Object(x.a)(k,2),S=E[0],C=E[1].loading,I=Object(ue.a)(ye),T=Object(x.a)(I,2),P=T[0],N=T[1].loading,A=function(e){var t=Object(se.a)(Ae),n=Object(x.a)(t,2),a=n[0],i=n[1].data,c=Object(r.useCallback)(Object(ie.a)(oe.a.mark((function t(){var n,r,i,c,o;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Eo(e);case 2:c=t.sent,o=null!==(n=null===(r=c.runner)||void 0===r||null===(i=r.query)||void 0===i?void 0:i.version)&&void 0!==n?n:">=0.15.0",a({variables:{range:o,registry:Nr.query}});case 5:case"end":return t.stop()}}),t)}))),[e]);Object(r.useEffect)((function(){c()}),[c]);var o=null===i||void 0===i?void 0:i.getRegistryVersions;return Object(ae.isEmpty)(o)?[]:o}(e),R=function(e){var t=Object(se.a)(Ae),n=Object(x.a)(t,2),a=n[0],i=n[1].data,c=Object(r.useCallback)(Object(ie.a)(oe.a.mark((function t(){var n,r,i,c,o,s,u,l,d;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Eo(e);case 2:i=t.sent,c=i.dataSources,o=i.runner,s=c[0].kind,u=s.split("/")[0],l=So(u),d=null!==(n=null===o||void 0===o||null===(r=o.node)||void 0===r?void 0:r.version)&&void 0!==n?n:Co[u],a({variables:{range:d,registry:l}});case 9:case"end":return t.stop()}}),t)}))),[e]);Object(r.useEffect)((function(){c()}),[c]);var o=null===i||void 0===i?void 0:i.getRegistryVersions;console.log("registryVersions:",o);var s=null===o||void 0===o?void 0:o.filter((function(e){return"v1.2.1"!==e}));return Object(ae.isEmpty)(s)?[]:s}(e),q=Object(r.useState)(0),D=Object(x.a)(q,2),M=D[0],L=D[1],z=Object(r.useState)(),U=Object(x.a)(z,2),V=U[0],G=U[1],$=Object(r.useState)(!1),F=Object(x.a)($,2),Y=F[0],H=F[1],_=Object(r.useState)(),K=Object(x.a)(_,2),B=K[0],W=K[1],Q=function(){var t=Object(ie.a)(oe.a.mark((function t(){var n;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,go(e);case 2:n=t.sent,G(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),J=function(){var e=setInterval((function(){return Q()}),6e3);setTimeout((function(){clearInterval(e),d()}),6e4)};Object(r.useEffect)((function(){i(Object(ae.isUndefined)(a))}),[a]),Object(r.useEffect)((function(){V&&L(zo(V.targetHeight,V.lastProcessedHeight))}),[V]),Object(r.useEffect)((function(){Q()}),[n]);var Z,te,ne,re,ce,le,de,pe=Object(r.useMemo)((function(){return O||w||C||N}),[O,w,C,N]),fe=Object(r.useMemo)((function(){var e="HEALTHY"===(null===V||void 0===V?void 0:V.indexerStatus);switch(n){case Ar.NOTINDEXING:return e?Rr.Started:Rr.NotIndexing;case Ar.INDEXING:return e?Rr.Indexing:Rr.Terminated;case Ar.READY:return e?Rr.Ready:Rr.Terminated;default:return Rr.NotIndexing}}),[n,V]),xe=Object(r.useMemo)((function(){return fe===Rr.Terminated?Object(Tt.a)({visible:!0},Ta[fe]):{visible:!1}}),[fe]),he=function(e){var t;return t={},Object(ee.a)(t,Rr.NotIndexing,[]),Object(ee.a)(t,Rr.Started,[Ea("Announce Indexing",(function(){return e(Lr.AnnounceIndexing)}))]),Object(ee.a)(t,Rr.Indexing,[Ea("Announce Ready",(function(){return e(Lr.AnnounceReady)}))]),Object(ee.a)(t,Rr.Ready,[Ea("Announce NotIndexing",(function(){return e(Lr.AnnounceNotIndexing)}))]),Object(ee.a)(t,Rr.Terminated,[Ea("Announce NotIndexing",(function(){return e(Lr.AnnounceNotIndexing)}))]),t}((function(e){W(e),H(!0)})),Oe=function(e){var t;return t={},Object(ee.a)(t,Rr.NotIndexing,[Ea("Start Indexing",(function(){return e(Lr.StartIndexing)})),Ea("Remove Project",(function(){return e(Lr.RemoveProject)}))]),Object(ee.a)(t,Rr.Started,[Ea("Stop Project",(function(){return e(Lr.StopProject)}))]),Object(ee.a)(t,Rr.Indexing,[Ea("Restart Indexing",(function(){return e(Lr.RestartProject)})),Ea("Stop Indexing",(function(){return e(Lr.StopIndexing)}))]),Object(ee.a)(t,Rr.Ready,[Ea("Restart Indexing",(function(){return e(Lr.RestartProject)})),Ea("Stop Indexing",(function(){return e(Lr.StopIndexing)}))]),Object(ee.a)(t,Rr.Terminated,[Ea("Restart Indexing",(function(){return e(Lr.RestartProject)})),Ea("Remove Project",(function(){return e(Lr.RemoveProject)}))]),t}((function(e){W(e),H(!0)})),me=function(e){var t;return t={},Object(ee.a)(t,qr.Open,[Ea("Change price",(function(){return e(Lr.PaygChangePrice)})),Ea("Close PAYG",(function(){return e(Lr.PaygClose)}))]),Object(ee.a)(t,qr.Close,[Ea("Open PAYG",(function(){return e(Lr.PaygOpen)}))]),t}((function(e){W(e),H(!0)})),ve=Object(r.useMemo)((function(){return Object(ae.isUndefined)(fe)?[]:he[fe]}),[fe]),ke=Object(r.useMemo)((function(){return Object(ae.isUndefined)(fe)?[]:Oe[fe]}),[fe]),Ee=Object(r.useMemo)((function(){return Object(ae.isUndefined)(p)?[]:me[p]}),[p]),Se=function(e){var t;H(!1),null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.message&&b(qa(e.data.message))},Ce=Object(r.useMemo)((function(){var e,t;return{networkEndpoint:null!==(e=null===u||void 0===u?void 0:u.networkEndpoint)&&void 0!==e?e:"",networkDictionary:null!==(t=null===u||void 0===u?void 0:u.networkDictionary)&&void 0!==t?t:"",nodeVersion:null!==u&&void 0!==u&&u.nodeVersion?u.nodeVersion:R[0],queryVersion:null!==u&&void 0!==u&&u.queryVersion?u.queryVersion:A[0],poiEnabled:null===u||void 0===u||!u.networkEndpoint||(null===u||void 0===u?void 0:u.poiEnabled),forceEnabled:!(null===u||void 0===u||!u.networkEndpoint)&&(null===u||void 0===u?void 0:u.forceEnabled),paygPrice:null!==u&&void 0!==u&&u.paygPrice?null===u||void 0===u?void 0:u.paygPrice:"",paygExpiration:null!==u&&void 0!==u&&u.paygExpiration?null===u||void 0===u?void 0:u.paygExpiration:3600,paygThreshold:null!==u&&void 0!==u&&u.paygThreshold?null===u||void 0===u?void 0:u.paygThreshold:1e3,paygOverflow:null!==u&&void 0!==u&&u.paygOverflow?null===u||void 0===u?void 0:u.paygOverflow:5}}),[u,R,A]),Ie=Object(r.useMemo)((function(){return{query:A,node:R}}),[R,A]),Te=function(e){b(Pa[e]),J()},Pe=function(){var t=Object(ie.a)(oe.a.mark((function t(n,r){var a,i;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=n.poiEnabled,i=n.forceEnabled,t.next=4,h({variables:Object(Tt.a)(Object(Tt.a)({},n),{},{poiEnabled:Go(a),forceEnabled:Go(i),id:e})});case 4:Se(),Te(ua.Started),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),r.setErrors(Object(ee.a)({},aa.networkEndpoint,"Invalid service endpoint"));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}(),Ne=function(){var t=Object(ie.a)(oe.a.mark((function t(){return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y({variables:{id:e}});case 3:Se(),Te(ua.Terminated),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("fail to stop project",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),Re=function(){var t=Object(ie.a)(oe.a.mark((function t(){return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S({variables:{id:e}});case 3:c.replace("/projects"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error("fail to remove project",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),qe=function(){var t=Object(ie.a)(oe.a.mark((function t(n,r){var a,i,c,o;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=n.paygPrice,i=n.paygExpiration,c=n.paygThreshold,o=n.paygOverflow,t.next=4,P({variables:{paygPrice:a,paygExpiration:Number(i),paygThreshold:Number(c),paygOverflow:Number(o),id:e}});case 4:Se(),J(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),r.setErrors(Object(ee.a)({},aa.paygPrice,"Invalid PAYG"));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}(),De=function(){var t=Object(ie.a)(oe.a.mark((function t(){return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Se(),t.next=4,P({variables:{paygPrice:"",paygExpiration:null===u||void 0===u?void 0:u.paygExpiration,paygThreshold:null===u||void 0===u?void 0:u.paygThreshold,paygOverflow:null===u||void 0===u?void 0:u.paygOverflow,id:e}});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error("fail to close PAYG",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),Me=(Z=Ce,te=Ie,ne=Pe,Object(ee.a)({},Lr.StartIndexing,[{index:0,title:ka.startProject.title,desc:ka.startProject.desc,buttonTitle:"Confirm",form:Ca(Z,te,ne),onClick:ne}])),ze=function(e,t,n){return Object(ee.a)({},Lr.RestartProject,[{index:0,title:ka.restartProject.title,desc:ka.restartProject.desc,buttonTitle:"Confirm",form:Ca(e,t,n)}])}(Ce,Ie,Pe),Ue=(re=Ne,Object(ee.a)({},Lr.StopIndexing,[{index:0,title:ka.stopProject.title,desc:ka.stopProject.desc,buttonTitle:"Confirm",onClick:re}])),Ve=function(e){return Object(ee.a)({},Lr.StopProject,[{index:0,title:ka.stopProject.title,desc:ka.stopProject.desc,buttonTitle:"Confirm",onClick:e}])}(Ne),Ge=(ce=Re,Object(ee.a)({},Lr.RemoveProject,[{index:0,title:ka.removeProject.title,desc:ka.removeProject.desc,buttonTitle:"Confirm",onClick:ce}])),$e=(le=function(){return o(Lr.AnnounceIndexing,Se)},Object(ee.a)({},Lr.AnnounceIndexing,[{index:0,title:ka.announceIndexing.title,desc:ka.announceIndexing.desc,buttonTitle:"Send Transction",onClick:le}])),Fe=function(e){return Object(ee.a)({},Lr.AnnounceReady,[{index:0,title:ka.announceReady.title,desc:ka.announceReady.desc,buttonTitle:"Send Transction",onClick:e}])}((function(){return o(Lr.AnnounceReady,Se)})),Ye=function(e){return Object(ee.a)({},Lr.AnnounceNotIndexing,[{index:0,title:ka.announceNotIndexing.title,desc:ka.announceNotIndexing.desc,buttonTitle:"Send Transction",onClick:e}])}((function(){return o(Lr.AnnounceNotIndexing,Se)})),He=function(e,t){return Object(ee.a)({},Lr.PaygOpen,[{index:0,title:ka.paygOpen.title,desc:ka.paygOpen.desc,buttonTitle:"Confirm",form:Ia(e,t)}])}(Ce,qe),_e=function(e,t){return Object(ee.a)({},Lr.PaygChangePrice,[{index:0,title:ka.paygChangePrice.title,desc:ka.paygChangePrice.desc,buttonTitle:"Confirm",form:Ia(e,t)}])}(Ce,qe),Ke=(de=De,Object(ee.a)({},Lr.PaygClose,[{index:0,title:ka.paygClose.title,desc:ka.paygClose.desc,buttonTitle:"Confirm",onClick:de}])),Be=Object(Tt.a)(Object(Tt.a)(Object(Tt.a)(Object(Tt.a)(Object(Tt.a)(Object(Tt.a)(Object(Tt.a)(Object(Tt.a)(Object(Tt.a)(Object(Tt.a)(Object(Tt.a)({},Me),ze),Ue),Ve),Ge),$e),Fe),Ye),He),_e),Ke),We=Object(r.useMemo)((function(){return B?[Sa[B],Be[B]]:["",[]]}),[B,Be]),Xe=Object(x.a)(We,2),Qe=Xe[0],Je=Xe[1];return Object(g.jsxs)(js,{children:[a&&Object(g.jsxs)(fs,{children:[Object(g.jsx)(us,{id:e,projectStatus:fe,project:a}),Object(g.jsx)(As,{percent:M,actionItems:ve,status:n,metadata:V}),Object(g.jsx)(Ss,{id:e,actionItems:ke,data:V}),Object(g.jsx)(gs,{actionItems:Ee,status:p,price:null===u||void 0===u?void 0:u.paygPrice,expiration:null===u||void 0===u?void 0:u.paygExpiration,threshold:null===u||void 0===u?void 0:u.paygThreshold,overflow:null===u||void 0===u?void 0:u.paygOverflow}),Object(g.jsx)(Qs,{id:e,project:a})]}),Object(g.jsx)(ir,{visible:Y,title:Qe,onClose:Se,steps:Je,type:B,loading:pe}),Object(g.jsx)(lo,Object(Tt.a)({},xe))]})},Zs=f.a.div(Gs||(Gs=Object(j.a)(["\n  display: flex;\n  flex: 1;\n  justify-content: center;\n"]))),eu=f.a.div($s||($s=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  min-width: 600px;\n  padding: 10px 100px;\n  padding-bottom: 150px;\n  overflow-y: scroll;\n"]))),tu=f.a.div(Fs||(Fs=Object(j.a)(["\n  display: flex;\n  width: 100%;\n  min-width: 600px;\n  align-items: center;\n  justify-content: space-between;\n"]))),nu=f.a.div(Ys||(Ys=Object(j.a)(["\n  display: flex;\n  flex: ",";\n  background-color: ",";\n  padding-left: ","px;\n  min-width: ","px;\n  margin-right: 15px;\n  align-items: center;\n"])),(function(e){var t=e.flex;return null!==t&&void 0!==t?t:1}),(function(e){var t=e.color;return null!==t&&void 0!==t?t:"white"}),(function(e){var t=e.pl;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mw;return null!==t&&void 0!==t?t:100})),ru=f.a.div(Hs||(Hs=Object(j.a)(["\n  display: flex;\n  width: 100%;\n  min-width: 600px;\n  min-height: 90px;\n  margin: 10px 0px;\n  padding: 10px 10px;\n  background-color: white;\n  :hover {\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n    cursor: pointer;\n  }\n"]))),au=Object(f.a)(b.d)(_s||(_s=Object(j.a)(["\n  max-width: 60%;\n  min-width: 300;\n"]))),iu=f.a.div(Ks||(Ks=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 80%;\n  margin-left: 20px;\n"]))),cu=f.a.div(Bs||(Bs=Object(j.a)(["\n  display: flex;\n  width: 100%;\n  min-width: 600px;\n  height: 60px;\n  margin-top: 50px;\n  margin-bottom: 30px;\n"]))),ou=[{title:"Project Name",flex:7},{title:"Progress",flex:6},{title:"Status",flex:1}],su=function(){return Object(g.jsx)(cu,{children:ou.map((function(e){var t=e.title,n=e.flex;return Object(g.jsx)(nu,{color:"#f6f9fc",flex:n,children:Object(g.jsx)(qt,{color:"gray",children:t})},t)}))})},uu=function(e){var t=e.id,n=e.name,a=e.metadata,i=Object(l.g)(),c=function(e){var t=Object(r.useState)(),n=Object(x.a)(t,2),a=n[0],i=n[1],c=Le().account,o=Ze(),s=Object(r.useCallback)(Object(ie.a)(oe.a.mark((function t(){var n,r;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o&&c&&e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,o.queryRegistry.deploymentStatusByIndexer(Object(jr.d)(e),c);case 4:n=t.sent,r=n.status,i(r);case 7:case"end":return t.stop()}}),t)}))),[o,c,e]);return Object(r.useEffect)((function(){s()}),[s]),a}(t),o=Object(r.useMemo)((function(){return a?zo(a.targetHeight,a.lastProcessedHeight):0}),[a]);return Object(g.jsxs)(ru,{onClick:function(){return i.push("/project/".concat(t),{data:Object(Tt.a)(Object(Tt.a)({},e),{},{status:c})})},children:[Object(g.jsxs)(nu,{pl:15,flex:7,children:[Object(g.jsx)(Cn,{address:Object(jr.d)(t),size:70}),Object(g.jsxs)(iu,{children:[Object(g.jsx)(qt,{fw:"600",size:18,children:n}),Object(g.jsx)(qt,{size:13,mt:5,children:t})]})]}),Object(g.jsx)(nu,{flex:6,children:Object(g.jsx)(au,{progress:o/100})}),Object(g.jsx)(nu,{flex:1,children:Object(ae.isUndefined)(c)?Object(g.jsx)(b.e,{}):Object(g.jsx)(Yc,{text:Is[c],color:Cs[c]})})]})},lu=f.a.div(Ws||(Ws=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  align-items: center;\n  justify-content: flex-start;\n  margin-top: 80px;\n"]))),du=function(e){var t=e.onClick;return Object(g.jsx)(lu,{children:Object(g.jsx)(ji,{item:{title:"Start to index a Subquery project",desc:"Go to Subquery Explorer to start exploring query projects, pick the project you are interesting and copy the deployment id in the page, then press the add project button and paste in deployment id, add the project into you coordinator service, and you can manage the projects in indexer app. ",buttonTitle:"Add Project"},onClick:t,link:Object(g.jsx)("a",{target:"_blank",href:"https://frontier.subquery.network/explorer",rel:"noreferrer",children:"SubQuery Explorer"})})})},pu=function(){var e=Ur(),t=X().setPageLoading,n=Object(ue.a)(ve),a=Object(x.a)(n,2),i=a[0],c=a[1].loading,o=Object(se.a)(ke,{fetchPolicy:"network-only"}),s=Object(x.a)(o,2),u=s[0],l=function(e){var t=Object(r.useState)(),n=Object(x.a)(t,2),a=n[0],i=n[1],c=null===e||void 0===e?void 0:e.getProjects,o=X().setPageLoading,s=Le().account,u=Object(r.useCallback)(Object(ie.a)(oe.a.mark((function e(){var t,n,r;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,wo(s);case 4:if(t=e.sent,n=ko(c,t),!Object(ae.isUndefined)(n)){e.next=8;break}return e.abrupt("return");case 8:if(!Object(ae.isEmpty)(n)){e.next=12;break}return o(!1),i([]),e.abrupt("return");case 12:return e.prev=12,e.next=15,Promise.all(n.map((function(e){var t=e.id;return Promise.all([yo(t),go(t)])})));case 15:r=e.sent,i(r.map((function(e){var t=Object(x.a)(e,2),n=t[0],r=t[1];return Object(Tt.a)(Object(Tt.a)({},n),{},{metadata:r})})).filter((function(e){return!!e.id}))),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(12),console.error("Get project details failed:",e.t0),o(!1);case 23:case"end":return e.stop()}}),e,null,[[12,19]])}))),[c,s]);return Object(r.useEffect)((function(){o(!0),u()}),[u,e]),{projectDetailList:a,getProjectDetailList:u}}(s[1].data),d=l.projectDetailList,p=Object(r.useState)(!1),b=Object(x.a)(p,2),j=b[0],f=b[1];Object(r.useEffect)((function(){t(Object(ae.isUndefined)(d))}),[d]),Object(r.useEffect)((function(){t(!0),u()}),[]);var h,O=(h=function(){var e=Object(ie.a)(oe.a.mark((function e(t,n){var r;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t[aa.deploymentId].trim(),e.next=4,i({variables:{id:r}});case 4:f(!1),u(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n.setErrors(Object(ee.a)({},aa.deploymentId,"Invalid deployment id"));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),Object(ee.a)({},Mr.addProject,[{index:0,title:"Add new project",desc:"Input the deployment id, and add the project into you service. Your can manage the project in the projects page and start indexing the project at any time you want.",buttonTitle:"Add project",form:{formValues:ba,schema:pa,onFormSubmit:h,items:[{formKey:aa.deploymentId,title:"Add new project",placeholder:"QmYDpk94SCgxv4j2PyLkaD8fWJpHwJufMLX2HGjefsNHH4"}]}}]));return Object(g.jsxs)(Zs,{children:[e&&(Object(ae.isUndefined)(d)?null:Object(ae.isEmpty)(d)?Object(g.jsx)(du,{onClick:function(){return f(!0)}}):Object(g.jsxs)(eu,{children:[Object(g.jsxs)(tu,{children:[Object(g.jsx)(qt,{size:45,children:"Projects"}),Object(g.jsx)(zt,{title:"Add Project",onClick:function(){return f(!0)}})]}),Object(g.jsx)(su,{}),d.map((function(e){return Object(g.jsx)(uu,Object(Tt.a)({},e),e.id)}))]})),Object(g.jsx)(ir,{visible:j,title:O.addProject[0].title,onClose:function(){f(!1)},steps:O.addProject,currentStep:0,type:Mr.addProject,loading:c})]})},bu=function(){var e=function(){var e=Object(r.useState)(),t=Object(x.a)(e,2),n=t[0],a=t[1],i=Le().account,c=Ze(),o=Object(r.useCallback)(Object(ie.a)(oe.a.mark((function e(){var t,n,r;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&c){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,c.indexerRegistry.minimumStakingAmount();case 5:if(e.t1=t=e.sent,e.t0=null!==e.t1,!e.t0){e.next=9;break}e.t0=void 0!==t;case 9:if(!e.t0){e.next=13;break}e.t2=t,e.next=14;break;case 13:e.t2=1e3;case 14:return n=e.t2,e.next=17,c.sqToken.allowance(i,c.staking.address);case 17:r=e.sent,a(!!r.gte(n)),e.next=24;break;case 21:e.prev=21,e.t3=e.catch(2),a(!1);case 24:case"end":return e.stop()}}),e,null,[[2,21]])}))),[c,i]);return Object(r.useEffect)((function(){o()}),[o]),n}();return Object(r.useMemo)((function(){if(!Object(ae.isUndefined)(e))return e?wn.register:wn.onboarding}),[e])},ju=(Xs={},Object(ee.a)(Xs,wn.onboarding,{title:"Stake to become a Subquery Indexer",desc:"Become an Indexer so you can index subquery projects. You need to stake a minimum of 1000 SQT in order to index subquery projects. Learn more about the indexer",buttonTitle:"Get Started"}),Object(ee.a)(Xs,wn.authorisation,{title:"Request approve authorisation",desc:"Indexer Admin app need you to approve the authorisation request to deposit the SQT token into Subquery Staking contract, this is a one-time operation for the specific account. Please press the approve button then confirm and send the transaction on MetaMask.",buttonTitle:"Approve"}),Object(ee.a)(Xs,wn.register,{title:"Stake to become a Subquery Indexer",desc:"",buttonTitle:"Register Indexer"}),Object(ee.a)(Xs,wn.sync,{title:"Sync the indexer with coordinator service",desc:"This account has been an indexer already, please press the sync button to sync this account with your coordinator service, otherwise you can switch your account in the wallet to select the correct account.",buttonTitle:"Sync"}),Xs),fu=function(e){var t=e.onSubmit,n=e.loading,r=ju[wn.register],a=r.title,i=r.buttonTitle;return Object(g.jsxs)(zn,{children:[Object(g.jsx)(qt,{mb:50,size:35,fw:"bold",children:a}),Object(g.jsx)(Nt.c,{initialValues:ea,validationSchema:Zr,onSubmit:t,children:function(e){var t=e.errors,r=e.submitForm;return Object(g.jsxs)(Vt,{children:[Object(g.jsx)(rr,{title:"Indexer Name",fieldKey:Xr.name,errors:t}),Object(g.jsx)(rr,{title:"Proxy Endpoint",fieldKey:Xr.proxyEndpoint,errors:t}),Object(g.jsx)(rr,{title:"Staking Amount",fieldKey:Xr.amount,errors:t}),Object(g.jsx)(rr,{title:"Commission Rate (%)",fieldKey:Xr.rate,errors:t}),Object(g.jsx)(Ut,{children:Object(g.jsx)(zt,{mt:20,width:300,type:"primary",title:i,loading:n,onClick:r})})]})}})]})},xu=function(){var e,t=ze(),n=Le().account,a=zr(),i=Ur(),c=Ze(),o=Gr(n),s=o.tokenBalance,u=o.getTokenBalance,d=Object(l.g)(),p=bu(),b=qe().updateIndexer,j=X().setPageLoading,f=it().dispatchNotification,h=Object(r.useState)(),O=Object(x.a)(h,2),m=O[0],v=O[1],y=Object(r.useState)(!1),w=Object(x.a)(y,2),k=w[0],E=w[1],S=Object(r.useCallback)((function(){return m===wn.register}),[m]);Object(r.useEffect)((function(){j(Object(ae.isUndefined)(p)||Object(ae.isUndefined)(a)),p&&v(p),a&&v(wn.sync)}),[p,a]),Object(r.useEffect)((function(){n?i&&d.replace("/account"):d.replace("/")}),[i,n]);var C=Object(r.useMemo)((function(){return m&&ju[m]}),[m]),I=function(){E(!1),v(Xn[Qn(m)+1])},T=function(e){console.error("Send transaction failed:",e),E(!1)},P=Object(r.useCallback)(Object(ie.a)(oe.a.mark((function e(){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E(!0),n){e.next=3;break}return e.abrupt("return",f({type:"danger",title:"Fail to sync the indexer",message:"Can not find account, make sure MetaMask is connected"}));case 3:return e.next=5,b(n);case 5:return E(!1),e.abrupt("return",d.replace("/account"));case 7:case"end":return e.stop()}}),e)}))),[i]),N=function(){var e=Object(ie.a)(oe.a.mark((function e(){var n;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.prev=1,e.next=4,gr(c,t,"100000000000");case 4:return n=e.sent,e.next=7,n.wait(1);case 7:if(e.sent.status){e.next=10;break}throw new Error("Send approve transaction failed");case 10:I(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),T(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(ie.a)(oe.a.mark((function e(n,r){var a,i,o,l,d,p;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(!0),e.next=4,u();case 4:if(a=n.name,i=n.proxyEndpoint,o=n.amount,l=n.rate,!(Number(s)<o)){e.next=9;break}return E(!1),r.setErrors(Object(ee.a)({},Xr.amount,"Account balance ".concat(s," is not enough for staking ").concat(o," SQT"))),e.abrupt("return");case 9:return e.next=11,No(i);case 11:if(e.sent){e.next=16;break}return E(!1),r.setErrors(Object(ee.a)({},Xr.proxyEndpoint,"Invalid proxy endpoint")),e.abrupt("return");case 16:return e.next=18,Object(jr.e)(a,i);case 18:return d=e.sent,e.next=21,wr(c,t,o.toString(),d,1e4*l);case 21:return p=e.sent,e.next=24,p.wait(1);case 24:if(e.sent.status){e.next=27;break}throw new Error("Send indexer registry transaction failed");case 27:I(),e.next=33;break;case 30:e.prev=30,e.t0=e.catch(0),T(e.t0);case 33:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(t,n){return e.apply(this,arguments)}}(),R=(e={},Object(ee.a)(e,wn.onboarding,(function(){return v(wn.authorisation)})),Object(ee.a)(e,wn.authorisation,N),Object(ee.a)(e,wn.register,A),Object(ee.a)(e,wn.sync,P),e);return Object(g.jsxs)(uc,{children:[function(){if(m===wn.onboarding)return null;var e=Qn(m);return Object(g.jsx)(Un,{current:e,children:Xn.map((function(t,n){return Object(g.jsx)(Un.Step,{status:Jn(e,n),title:t},t)}))})}(),m&&C&&!S()&&Object(g.jsx)(ji,{item:C,loading:k,onClick:R[m]}),m&&S()&&Object(g.jsx)(fu,{loading:k,onSubmit:A})]})},hu=(n(1041),n(1042),n(1043),function(){var e=function(){var e=Le().account,t=X(),n=t.pageLoading,a=t.setPageLoading,i=qe(),c=i.indexer,o=i.load,s=Me(),u=Ue(),l=Object(r.useMemo)((function(){return!!e&&(null===e||void 0===e?void 0:e.toLowerCase())===(null===c||void 0===c?void 0:c.toLowerCase())}),[e,c]),d=Object(r.useState)(),p=Object(x.a)(d,2),b=p[0],j=p[1];return Object(r.useEffect)((function(){o()}),[o]),Object(r.useEffect)((function(){var e=s&&u;e||a(!1);var t=!n&&!l&&!Object(ae.isEmpty)(c)||!e;j(t)}),[e,c,l,n]),b}();return Object(g.jsxs)(u.a,{children:[Object(g.jsx)(sc,{}),Object(g.jsxs)("div",{className:"Main",children:[e?Object(g.jsx)(cn,{}):Object(g.jsxs)(l.d,{children:[Object(g.jsx)(l.b,{component:pu,path:"/projects"}),Object(g.jsx)(l.b,{exact:!0,component:Js,path:"/project/:id"}),Object(g.jsx)(l.b,{component:uo,path:"/payg"}),Object(g.jsx)(l.b,{component:li,path:"/account"}),Object(g.jsx)(l.b,{component:Mi,path:"/controller-management"}),Object(g.jsx)(l.b,{component:Gc,path:"/network"}),Object(g.jsx)(l.b,{component:xu,path:"/register"}),Object(g.jsx)(l.b,{component:lc,path:"/"})]}),Object(g.jsx)(rt,{}),Object(g.jsx)(Z,{})]}),Object(g.jsx)(Wi,{})]})}),Ou=function(e){var t=e.error,n=e.componentStack,r=e.resetError;return Object(g.jsxs)("div",{className:"errorFallback",children:[Object(g.jsx)(b.g,{className:"errorText",children:"Something went wrong:"}),Object(g.jsx)(b.g,{className:"errorText",children:(null===t||void 0===t?void 0:t.message)||t.toString()}),Object(g.jsx)(b.g,{children:n}),Object(g.jsx)(b.b,{onClick:r,colorScheme:"gradient",label:"Try again."})]})},mu=function(){return Object(g.jsx)(p.a,{fallback:Ou,showDialog:!0,children:Object(g.jsx)(d.a,{client:pn(ln),children:Object(g.jsx)(Et,{children:Object(g.jsx)(et,{children:Object(g.jsx)(De,{children:Object(g.jsx)(Q,{children:Object(g.jsx)(ct,{children:Object(g.jsx)("div",{className:"App",children:Object(g.jsx)(hu,{})})})})})})})})})},vu=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1099)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};n(1044);o.a({dsn:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IPFS_GATEWAY:"https://unauthipfs.subquery.network/ipfs/api/v0",REACT_APP_QUERY_REGISTRY_PROJECT:"https://project.subquery.network/project/subquery/subquery-network-subql-project"}).SENTRY_DSN,integrations:[new s.a],tracesSampleRate:1}),c.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(mu,{})}),document.getElementById("root")),vu()},557:function(e,t){},621:function(e,t,n){var r={"./moonbase.json":242,"./testnet.json":622};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=621},624:function(e,t){},629:function(e,t){},634:function(e,t){},653:function(e,t){},655:function(e,t){},666:function(e,t){},668:function(e,t){},681:function(e,t){},683:function(e,t){},75:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"e",(function(){return j})),n.d(t,"c",(function(){return x}));var r=n(23),a=n(490),i=n(2),c=n.n(i),o=n(144),s=n(348),u=Object(s.create)({url:window.env.IPFS_GATEWAY}),l=Object(s.create)({url:"https://ipfs.subquery.network/ipfs/api/v0"});function d(t){return"0x".concat(e.from(o.utils.base58.decode(t)).slice(2).toString("hex"))}function p(t){var n="1220".concat(t.slice(2)),r=e.from(n,"hex");return o.utils.base58.encode(r)}function b(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e,0),n.set(t,e.length),n}function j(e,t){return f.apply(this,arguments)}function f(){return(f=Object(r.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.add(JSON.stringify({name:t,url:n}),{pin:!0});case 2:return r=e.sent,a=r.cid.toV0().toString(),e.abrupt("return",d(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return h.apply(this,arguments)}function h(){return h=Object(r.a)(c.a.mark((function t(n){var r,i,o,s,l,d,p,j,f,x,h=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=h.length>1&&void 0!==h[1]?h[1]:u,i=r.cat(n),s=!1,l=!1,t.prev=4,p=Object(a.a)(i);case 6:return t.next=8,p.next();case 8:if(!(s=!(j=t.sent).done)){t.next=14;break}f=j.value,o=o?b(o,f):f;case 11:s=!1,t.next=6;break;case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(4),l=!0,d=t.t0;case 20:if(t.prev=20,t.prev=21,!s||null==p.return){t.next=25;break}return t.next=25,p.return();case 25:if(t.prev=25,!l){t.next=28;break}throw d;case 28:return t.finish(25);case 29:return t.finish(20);case 30:if(o){t.next=33;break}return console.error("Unable to fetch data from ipfs: ".concat(n)),t.abrupt("return",o);case 33:return x=e.from(o).toString("utf8"),t.prev=34,t.abrupt("return",JSON.parse(e.from(o).toString("utf8")));case 38:return t.prev=38,t.t1=t.catch(34),t.abrupt("return",x);case 41:case"end":return t.stop()}}),t,null,[[4,16,20,30],[21,,25,29],[34,38]])}))),h.apply(this,arguments)}}).call(this,n(63).Buffer)},817:function(e,t){},979:function(e,t){}},[[1045,1,2]]]);
//# sourceMappingURL=main.eda253e7.chunk.js.map